<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"wangwen135.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
<meta property="og:type" content="website">
<meta property="og:title" content="王某某的笔记">
<meta property="og:url" content="https://wangwen135.github.io/page/8/index.html">
<meta property="og:site_name" content="王某某的笔记">
<meta property="og:description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="王某某">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://wangwen135.github.io/page/8/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/8/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>王某某的笔记</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">王某某的笔记</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录我的编程之路</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="王某某"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">王某某</p>
  <div class="site-description" itemprop="description">这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">158</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">121</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/wangwen135" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wangwen135" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianshu.com/u/66c41e72644b" title="简  书 → https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;66c41e72644b" rel="noopener me" target="_blank"><i class="fa fa-link fa-fw"></i>简  书</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wangwen135@gmail.com" title="E-Mail → mailto:wangwen135@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/wangwen135" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;wangwen135" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/Redis/Redis%E6%B5%8B%E8%AF%95-java%E4%BB%A3%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Redis/Redis%E6%B5%8B%E8%AF%95-java%E4%BB%A3%E7%A0%81/" class="post-title-link" itemprop="url">Redis测试-java代码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-14 23:41:00" itemprop="dateCreated datePublished" datetime="2020-11-14T23:41:00+08:00">2020-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>636</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>pom.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.9.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h2 id="简单测试"><a href="#简单测试" class="headerlink" title="简单测试"></a>简单测试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Jedis jedis = new Jedis(&quot;192.168.1.213&quot;);</span><br><span class="line">    jedis.set(&quot;foo&quot;, &quot;bar&quot;);</span><br><span class="line">    String value = jedis.get(&quot;foo&quot;);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果用这种方法连集群，会看到如下的错误</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; redis.clients.jedis.exceptions.JedisMovedDataException: MOVED 12182 192.168.1.214:6382</span><br></pre></td></tr></table></figure>

<h2 id="Redis集群测试"><a href="#Redis集群测试" class="headerlink" title="Redis集群测试"></a>Redis集群测试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Set&lt;HostAndPort&gt; jedisClusterNodes = new HashSet&lt;HostAndPort&gt;();</span><br><span class="line">    // Jedis集群将尝试自动发现集群节点</span><br><span class="line">    jedisClusterNodes.add(new HostAndPort(&quot;192.168.1.214&quot;, 6379));</span><br><span class="line">    // jedisClusterNodes.add(new HostAndPort(&quot;192.168.1.214&quot;, 6380));</span><br><span class="line">    // jedisClusterNodes.add(new HostAndPort(&quot;192.168.1.214&quot;, 6381));</span><br><span class="line">    JedisCluster jc = new JedisCluster(jedisClusterNodes);</span><br><span class="line">    jc.set(&quot;foo&quot;, &quot;bar&quot;);</span><br><span class="line">    jc.set(&quot;foo1&quot;, &quot;bar1&quot;);</span><br><span class="line">    jc.set(&quot;foo2&quot;, &quot;bar2&quot;);</span><br><span class="line">    jc.set(&quot;foo3&quot;, &quot;bar3&quot;);</span><br><span class="line">    jc.set(&quot;foo4&quot;, &quot;bar4&quot;);</span><br><span class="line">    jc.set(&quot;foo5&quot;, &quot;bar5&quot;);</span><br><span class="line">    jc.set(&quot;foo6&quot;, &quot;bar6&quot;);</span><br><span class="line"></span><br><span class="line">    System.out.println(jc.get(&quot;foo&quot;));</span><br><span class="line">    System.out.println(jc.get(&quot;foo1&quot;));</span><br><span class="line">    System.out.println(jc.get(&quot;foo2&quot;));</span><br><span class="line">    System.out.println(jc.get(&quot;foo3&quot;));</span><br><span class="line">    System.out.println(jc.get(&quot;foo4&quot;));</span><br><span class="line">    System.out.println(jc.get(&quot;foo5&quot;));</span><br><span class="line">    System.out.println(jc.get(&quot;foo6&quot;));</span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;===================&quot;);</span><br><span class="line"></span><br><span class="line">    Map&lt;String, JedisPool&gt; map = jc.getClusterNodes();</span><br><span class="line">    for (Map.Entry&lt;String, JedisPool&gt; e : map.entrySet()) &#123;</span><br><span class="line">        System.out.println(e.getKey());</span><br><span class="line">        System.out.println(&quot;===================&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行时报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool</span><br><span class="line">	at redis.clients.util.Pool.getResource(Pool.java:53)</span><br><span class="line">	at redis.clients.jedis.JedisPool.getResource(JedisPool.java:226)</span><br><span class="line">	at redis.clients.jedis.JedisSlotBasedConnectionHandler.getConnectionFromSlot(JedisSlotBasedConnectionHandler.java:66)</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>因为在之前创建创建集群时使用的IP是127.0.0.1，当返回(error) MOVED 10439 127.0.0.1:6381时，系统尝试连接本地的端口，然后连不上失败了</p>
<p>修改Redis配置文件，绑定到正确的IP上，然后重新创建集群指定具体的IP地址：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./redis-trib.rb create --replicas 1 192.168.1.214:6379 192.168.1.214:6381 192.168.1.214:6382 192.168.1.214:6383 192.168.1.214:6384 192.168.1.214:6385</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#杀掉redis进程</span><br><span class="line">ps -ef | grep redis | awk &#x27;&#123;print $2&#125;&#x27; | xargs kill</span><br><span class="line"></span><br><span class="line">#删除</span><br><span class="line">rm -f /data/redis/d63*/dump.rdb</span><br><span class="line">rm -f /data/redis/d63*/nodes.conf</span><br><span class="line"></span><br><span class="line">#批量替换</span><br><span class="line">sed -i &#x27;s/192.168.1.214/0.0.0.0/&#x27; */redis.conf</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Jedis客户端分片测试"><a href="#Jedis客户端分片测试" class="headerlink" title="Jedis客户端分片测试"></a>Jedis客户端分片测试</h2><p>分片使用一种称为“一致哈希”的技术，并根据一些散列算法（md5和murmur，后者不太标准，但速度更快）在一组redis服务器上同等地分配key值。这样的节点被称为“分片”。优点是每个分片只会占总内存的 1&#x2F;n（对于n是分片数量）。</p>
<blockquote>
<p>先配置三个独立的redis服务 </p>
</blockquote>
<h3 id="直连接方式"><a href="#直连接方式" class="headerlink" title="直连接方式"></a>直连接方式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    List&lt;JedisShardInfo&gt; shards = new ArrayList&lt;JedisShardInfo&gt;();</span><br><span class="line">    JedisShardInfo si = new JedisShardInfo(&quot;192.168.1.213&quot;, 6380);</span><br><span class="line">    shards.add(si);</span><br><span class="line">    si = new JedisShardInfo(&quot;192.168.1.213&quot;, 6381);</span><br><span class="line">    shards.add(si);</span><br><span class="line">    si = new JedisShardInfo(&quot;192.168.1.213&quot;, 6382);</span><br><span class="line">    shards.add(si);</span><br><span class="line"></span><br><span class="line">    // 直接连接</span><br><span class="line">    ShardedJedis jedis = new ShardedJedis(shards);</span><br><span class="line">    jedis.set(&quot;a&quot;, &quot;foo&quot;);</span><br><span class="line">    jedis.set(&quot;a1&quot;, &quot;foo1&quot;);</span><br><span class="line">    jedis.set(&quot;a2&quot;, &quot;foo2&quot;);</span><br><span class="line">    jedis.set(&quot;a3&quot;, &quot;foo3&quot;);</span><br><span class="line">    jedis.set(&quot;a4&quot;, &quot;foo4&quot;);</span><br><span class="line"></span><br><span class="line">    System.out.println(jedis.get(&quot;a&quot;));</span><br><span class="line">    System.out.println(jedis.get(&quot;a1&quot;));</span><br><span class="line">    System.out.println(jedis.get(&quot;a2&quot;));</span><br><span class="line">    System.out.println(jedis.get(&quot;a3&quot;));</span><br><span class="line">    System.out.println(jedis.get(&quot;a4&quot;));</span><br><span class="line"></span><br><span class="line">    ShardInfo&lt;?&gt; sinfo = jedis.getShardInfo(&quot;a&quot;);</span><br><span class="line">    System.out.println(sinfo);</span><br><span class="line"></span><br><span class="line">    jedis.disconnect();</span><br><span class="line">    jedis.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="连接池方式"><a href="#连接池方式" class="headerlink" title="连接池方式"></a>连接池方式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    List&lt;JedisShardInfo&gt; shards = new ArrayList&lt;JedisShardInfo&gt;();</span><br><span class="line">    JedisShardInfo si = new JedisShardInfo(&quot;192.168.1.213&quot;, 6380);</span><br><span class="line">    shards.add(si);</span><br><span class="line">    si = new JedisShardInfo(&quot;192.168.1.213&quot;, 6381);</span><br><span class="line">    shards.add(si);</span><br><span class="line">    si = new JedisShardInfo(&quot;192.168.1.213&quot;, 6382);</span><br><span class="line">    shards.add(si);</span><br><span class="line"></span><br><span class="line">    // 池连接</span><br><span class="line">    JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();</span><br><span class="line">    ShardedJedisPool pool = new ShardedJedisPool(jedisPoolConfig, shards);</span><br><span class="line"></span><br><span class="line">    try (ShardedJedis jedis = pool.getResource()) &#123;</span><br><span class="line">        jedis.set(&quot;x&quot;, &quot;foo&quot;);</span><br><span class="line">        jedis.set(&quot;x1&quot;, &quot;foo1&quot;);</span><br><span class="line">        jedis.set(&quot;x2&quot;, &quot;foo2&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try (ShardedJedis jedis2 = pool.getResource()) &#123;</span><br><span class="line">        jedis2.set(&quot;y&quot;, &quot;bar&quot;);</span><br><span class="line">        jedis2.set(&quot;y1&quot;, &quot;bar1&quot;);</span><br><span class="line">        jedis2.set(&quot;y2&quot;, &quot;bar2&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try (ShardedJedis jedis = pool.getResource()) &#123;</span><br><span class="line">        System.out.println(jedis.get(&quot;x&quot;));</span><br><span class="line">        System.out.println(jedis.get(&quot;x1&quot;));</span><br><span class="line">        System.out.println(jedis.get(&quot;x2&quot;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try (ShardedJedis jedis2 = pool.getResource()) &#123;</span><br><span class="line">        System.out.println(jedis2.get(&quot;y&quot;));</span><br><span class="line">        System.out.println(jedis2.get(&quot;y1&quot;));</span><br><span class="line">        System.out.println(jedis2.get(&quot;y2&quot;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pool.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/Elasticsearch/ES%20%E4%BD%BF%E7%94%A8Lucene-%E4%BF%AE%E5%A4%8D%E5%88%86%E7%89%87%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Elasticsearch/ES%20%E4%BD%BF%E7%94%A8Lucene-%E4%BF%AE%E5%A4%8D%E5%88%86%E7%89%87%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">ES-使用Lucene-修复分片问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-10 23:41:00" itemprop="dateCreated datePublished" datetime="2020-11-10T23:41:00+08:00">2020-11-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Elasticsearch/" itemprop="url" rel="index"><span itemprop="name">Elasticsearch</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>571</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Elasticsearch分片包含一个Lucene索引，因此我们可以使用Lucene的CheckIndex工具，该工具使我们能够扫描并修复有问题的片段，而且通常只会造成最小的数据丢失。</p>
<p>Lucene CheckIndex工具包含在默认的Elasticsearch发行版中，不需要额外的下载。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># change this to reflect your shard path, the format is</span><br><span class="line"># &#123;path.data&#125;/&#123;cluster_name&#125;/nodes/&#123;node_id&#125;/indices/&#123;index_name&#125;/&#123;shard_id&#125;/index/</span><br><span class="line"></span><br><span class="line">$ export SHARD_PATH=data/elasticsearch/nodes/0/indices/foo/0/index/</span><br><span class="line">$ java -cp lib/elasticsearch-*.jar:lib/*:lib/sigar/* -ea:org.apache.lucene... org.apache.lucene.index.CheckIndex $SHARD_PATH</span><br></pre></td></tr></table></figure>

<p>如果CheckIndex检测到问题并且其修复建议看起来很明智，则可以通过添加-fix命令行参数来告诉CheckIndex应用修补程序。</p>
<p>实际是用 <strong>-exorcise</strong> 命令</p>
<hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> java -cp lib/elasticsearch-*.jar:lib/*:lib/sigar/* -ea:org.apache.lucene... org.apache.lucene.index.CheckIndex</span><br><span class="line"></span><br><span class="line">ERROR: index path not specified</span><br><span class="line">Usage: java org.apache.lucene.index.CheckIndex pathToIndex [-exorcise] [-crossCheckTermVectors] [-segment X] [-segment Y] [-dir-impl X]</span><br><span class="line"></span><br><span class="line">  -exorcise: actually write a new segments_N file, removing any problematic segments</span><br><span class="line">  -fast: just verify file checksums, omitting logical integrity checks</span><br><span class="line">  -crossCheckTermVectors: verifies that term vectors match postings; THIS IS VERY SLOW!</span><br><span class="line">  -codec X: when exorcising, codec to write the new segments_N file with</span><br><span class="line">  -verbose: print additional details</span><br><span class="line">  -segment X: only check the specified segments.  This can be specified multiple</span><br><span class="line">              times, to check more than one segment, eg &#x27;-segment _2 -segment _a&#x27;.</span><br><span class="line">              You can&#x27;t use this with the -exorcise option</span><br><span class="line">  -dir-impl X: use a specific FSDirectory implementation. If no package is specified the org.apache.lucene.store package will be used.</span><br><span class="line"></span><br><span class="line">**WARNING**: -exorcise *LOSES DATA*. This should only be used on an emergency basis as it will cause</span><br><span class="line">documents (perhaps many) to be permanently removed from the index.  Always make</span><br><span class="line">a backup copy of your index before running this!  Do not run this tool on an index</span><br><span class="line">that is actively being written to.  You have been warned!</span><br><span class="line"></span><br><span class="line">Run without -exorcise, this tool will open the index, report version information</span><br><span class="line">and report any exceptions it hits and what action it would take if -exorcise were</span><br><span class="line">specified.  With -exorcise, this tool will remove any segments that have issues and</span><br><span class="line">write a new segments_N file.  This means all documents contained in the affected</span><br><span class="line">segments will be removed.</span><br><span class="line"></span><br><span class="line">This tool exits with exit code 1 if the index cannot be opened or has any</span><br><span class="line">corruption, else 0.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h1><p>当出现分片损坏时，应该是分片中的某些 segment 出问题了。</p>
<p>解决办法是删掉这些 segment 用新的代替，但是这些segment中保存的数据会丢失。</p>
<p>处理步骤： </p>
<ol>
<li><p>关闭ES</p>
</li>
<li><p>执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ export SHARD_PATH=data/elasticsearch/nodes/0/indices/foo/0/index/</span><br><span class="line">$ java -cp lib/elasticsearch-*.jar:lib/*:lib/sigar/* -ea:org.apache.lucene... org.apache.lucene.index.CheckIndex $SHARD_PATH</span><br></pre></td></tr></table></figure>
<p>会提示有几个坏的segment，会丢失多少数据</p>
</li>
<li><p>使用 <strong>-exorcise</strong>命令进行数据恢复</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java -cp lib/elasticsearch-*.jar:lib/*:lib/sigar/* -ea:org.apache.lucene... org.apache.lucene.index.CheckIndex $SHARD_PATH -exorcise</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>完了启动es即可，只是会丢失上面所说的X条数据</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/git%20rebase%20%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/git%20rebase%20%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">git rebase 测试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-03 23:28:00" itemprop="dateCreated datePublished" datetime="2020-11-03T23:28:00+08:00">2020-11-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" itemprop="url" rel="index"><span itemprop="name">版本控制</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>509</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>当前在xxx分支上，然后执行rebase命令 master分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase master</span><br></pre></td></tr></table></figure>

<p>可以理解为将xxx分支上的改动抽出来弄成一坨，然后将master分支的代码弄到xxx分支这边来，然后再将刚刚弄出来的代码堆上去，就像这一坨代码是接在master分支的末尾上写的一样，这样你再回到master将这一堆代码merge过来，提交日志就不会分叉，看提交日志就特别清晰明了。</p>
<p>如果这一坨代码中有多个提交，不想要这么多的提交记录，就要加一个-i参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i B </span><br></pre></td></tr></table></figure>
<p>就会让你挑选你想要的提交</p>
<hr>
<p>……<br>不想写了<br>……</p>
<hr>
<p>从master 检出 dev,然后分别修改 master 和 dev，然后 合并</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"></span><br><span class="line">vi aaa.txt</span><br><span class="line"></span><br><span class="line">git checkout -b dev</span><br><span class="line"></span><br><span class="line">vi bbb.txt</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">git commit</span><br><span class="line"></span><br><span class="line">git checkout master</span><br><span class="line"></span><br><span class="line">vi aaa.txt</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">git commit</span><br><span class="line"></span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line">git merge master</span><br></pre></td></tr></table></figure>

<p>会导致提交日志里面出现分叉的merge信息，比较难看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git log --graph --pretty=oneline</span><br><span class="line">*   baba7341616a7fd6e6932bf76a90fca9782a8e54 (HEAD -&gt; dev) Merge branch &#x27;master&#x27; into dev</span><br><span class="line">|\</span><br><span class="line">| * 3c408871ffcc5cfc37a295ecf936a23aff808c68 (master) master modified aaa.txt</span><br><span class="line">* | a9dc6221ce4b152b292cbcd4e242026edbb7d379 dev branch add bbb.txt file</span><br><span class="line">|/</span><br><span class="line">* 171e52a8cd9c96706cb0112013d556b62932ee39 first commit</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用 rebase 后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase master</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --graph</span><br><span class="line">* 6879874 (HEAD -&gt; dev) dev branch add bbb.txt file</span><br><span class="line">* 3c40887 (master) master modified aaa.txt</span><br><span class="line">* 171e52a first commit</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在 rebase 的过程中，也许会出现冲突 conflict 。在这种情况， git 会停止 rebase 并会让你去解决冲突。在解决完冲突后，用 git add 命令去更新这些内容。</p>
<p>注意，你无需执行 git-commit，只要执行 continue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --continue</span><br></pre></td></tr></table></figure>
<p>这样 git 会继续应用余下的 patch 补丁文件。</p>
<p>在任何时候，我们都可以用 –abort 参数来终止 rebase 的行动，并且分支会回到 rebase 开始前的状态。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase —abort</span><br></pre></td></tr></table></figure>


<p>切回master分支，并进行合并</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line"></span><br><span class="line">$ git merge dev</span><br><span class="line"></span><br><span class="line">$ git log --oneline --graph</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<hr>
<hr>
<h3 id="rebase有冲突时"><a href="#rebase有冲突时" class="headerlink" title="rebase有冲突时"></a>rebase有冲突时</h3><p>处理完冲突后，添加文件到暂存区</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add/rm &lt;conflicted_files&gt;</span><br></pre></td></tr></table></figure>

<p>然后再继续</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --continue</span><br></pre></td></tr></table></figure>

<p>也可以跳过这次提交</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --skip</span><br></pre></td></tr></table></figure>

<p>要中止并回到“git rebase”之前的状态，请运行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rebase --abort</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/git%20%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/git%20%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">git 本地测试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-03 23:21:00" itemprop="dateCreated datePublished" datetime="2020-11-03T23:21:00+08:00">2020-11-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" itemprop="url" rel="index"><span itemprop="name">版本控制</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>411</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在window平台安装了git之后，想模拟从远程仓库拉取文件推送文件等，测试merge、rebase等</p>
<h3 id="创建本地git仓库"><a href="#创建本地git仓库" class="headerlink" title="创建本地git仓库"></a>创建本地git仓库</h3><p>随便找一个目录作为 repository</p>
<p>在gitBash 中执行 初始化git仓库的命令，顺便也可以加一个文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"></span><br><span class="line">vim aaa.txt</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">git commit -m &quot;add a file&quot;</span><br></pre></td></tr></table></figure>

<h3 id="将仓库中克隆到本地其他目录"><a href="#将仓库中克隆到本地其他目录" class="headerlink" title="将仓库中克隆到本地其他目录"></a>将仓库中克隆到本地其他目录</h3><p>在其他的目录中执行 git clone file:xxxx</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone file file:///d/test/repository/git1/.git/</span><br></pre></td></tr></table></figure>


<h3 id="修改文件之后，push到仓库中"><a href="#修改文件之后，push到仓库中" class="headerlink" title="修改文件之后，push到仓库中"></a>修改文件之后，push到仓库中</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br><span class="line"></span><br><span class="line">git checkout -b dev</span><br><span class="line"></span><br><span class="line">vim bbb.txt</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">git commit</span><br><span class="line"></span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"># 需要指定远程的分支</span><br><span class="line">git push --set-upstream origin dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="当不能push时，"><a href="#当不能push时，" class="headerlink" title="当不能push时，"></a>当不能push时，</h3><p>切换到master分支，推一个文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ git push</span><br><span class="line">Enumerating objects: 4, done.</span><br><span class="line">Counting objects: 100% (4/4), done.</span><br><span class="line">Delta compression using up to 12 threads</span><br><span class="line">Compressing objects: 100% (2/2), done.</span><br><span class="line">Writing objects: 100% (3/3), 297 bytes | 297.00 KiB/s, done.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0), pack-reused 0</span><br><span class="line">remote: error: refusing to update checked out branch: refs/heads/dev</span><br><span class="line">remote: error: By default, updating the current branch in a non-bare repository</span><br><span class="line">remote: is denied, because it will make the index and work tree inconsistent</span><br><span class="line">remote: with what you pushed, and will require &#x27;git reset --hard&#x27; to match</span><br><span class="line">remote: the work tree to HEAD.</span><br><span class="line">remote:</span><br><span class="line">remote: You can set the &#x27;receive.denyCurrentBranch&#x27; configuration variable</span><br><span class="line">remote: to &#x27;ignore&#x27; or &#x27;warn&#x27; in the remote repository to allow pushing into</span><br><span class="line">remote: its current branch; however, this is not recommended unless you</span><br><span class="line">remote: arranged to update its work tree to match what you pushed in some</span><br><span class="line">remote: other way.</span><br><span class="line">remote:</span><br><span class="line">remote: To squelch this message and still keep the default behaviour, set</span><br><span class="line">remote: &#x27;receive.denyCurrentBranch&#x27; configuration variable to &#x27;refuse&#x27;.</span><br><span class="line">To file:///d/test/repository/git1/.git/</span><br><span class="line"> ! [remote rejected] dev -&gt; dev (branch is currently checked out)</span><br><span class="line">error: failed to push some refs to &#x27;file:///d/test/repository/git1/.git/&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这是由于git默认拒绝了push操作，需要进行设置，可以在服务器（就是本机）执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config receive.denyCurrentBranch ignore</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E5%8A%9E%E5%85%AC%E8%BD%AF%E4%BB%B6/Excel/excel%E4%B8%AD%E5%85%B3%E8%81%94%E5%B7%A5%E4%BD%9C%E8%A1%A8%E5%8C%B9%E9%85%8D%E5%86%85%E5%AE%B9%EF%BC%88vlookup%E5%87%BD%E6%95%B0%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E5%8A%9E%E5%85%AC%E8%BD%AF%E4%BB%B6/Excel/excel%E4%B8%AD%E5%85%B3%E8%81%94%E5%B7%A5%E4%BD%9C%E8%A1%A8%E5%8C%B9%E9%85%8D%E5%86%85%E5%AE%B9%EF%BC%88vlookup%E5%87%BD%E6%95%B0%EF%BC%89/" class="post-title-link" itemprop="url">excel中关联工作表匹配内容（vlookup函数）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-09-26 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-26T00:00:00+08:00">2020-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8A%9E%E5%85%AC%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">办公软件</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8A%9E%E5%85%AC%E8%BD%AF%E4%BB%B6/Excel/" itemprop="url" rel="index"><span itemprop="name">Excel</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>281</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>要在 Excel 中实现根据 Sheet1 的值匹配 Sheet2 中的值并取出对应行中另一个单元格的内容，可以使用 VLOOKUP 或 INDEX+MATCH 函数组合。以下是两种方法的示例：</p>
<h3 id="方法一：使用-VLOOKUP-函数"><a href="#方法一：使用-VLOOKUP-函数" class="headerlink" title="方法一：使用 VLOOKUP 函数"></a>方法一：使用 VLOOKUP 函数</h3><p>假设 Sheet1 中的值在 A 列，Sheet2 中要匹配的值也在 A 列，取出匹配行中的 B 列的值。</p>
<ol>
<li>在 Sheet1 中，选择要放置匹配结果的单元格，例如 B2</li>
<li>输入以下公式：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=VLOOKUP(A2, Sheet2!A:B, 2, FALSE)</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>A2 是要匹配的值。</li>
<li>Sheet2!A:B 是要在 Sheet2 中查找的区域。</li>
<li>2 是返回的列号，即 Sheet2 中的 B 列。</li>
<li>FALSE 表示精确匹配。</li>
</ul>
<h3 id="方法二：使用-INDEX-和-MATCH-函数组合"><a href="#方法二：使用-INDEX-和-MATCH-函数组合" class="headerlink" title="方法二：使用 INDEX 和 MATCH 函数组合"></a>方法二：使用 INDEX 和 MATCH 函数组合</h3><p>假设 Sheet1 中的值在 A 列，Sheet2 中要匹配的值在 A 列，取出匹配行中的 B 列的值。</p>
<ol>
<li>在 Sheet1 中，选择要放置匹配结果的单元格，例如 B2。</li>
<li>输入以下公式：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=INDEX(Sheet2!B:B, MATCH(A2, Sheet2!A:A, 0))</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>INDEX(Sheet2!B:B, …) 表示返回 Sheet2 中 B 列的值。</li>
<li>MATCH(A2, Sheet2!A:A, 0) 查找 A2 的值在 Sheet2 A 列中的位置，0 表示精确匹配。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%B5%AE%E7%82%B9%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E7%9A%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%B5%AE%E7%82%B9%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E7%9A%84/" class="post-title-link" itemprop="url">浮点类型是如何存储的</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-09-08 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-08T00:00:00+08:00">2020-09-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>12 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="计算机如何存储字节"><a href="#计算机如何存储字节" class="headerlink" title="计算机如何存储字节"></a>计算机如何存储字节</h2><p>计算机中最小的存储单位是bit只能保存0和1，整数在内存中如何存储我们都知道，将要存储的数字转成2进制即可</p>
<p>用windows自带的计数器可以方便的查看整数对应的2进制值<br>如：<br>byte类型（单字节）</p>
<table>
<thead>
<tr>
<th>十进制</th>
<th>二进制</th>
</tr>
</thead>
<tbody><tr>
<td>8</td>
<td>0000 1000</td>
</tr>
<tr>
<td>9</td>
<td>0000 1001</td>
</tr>
<tr>
<td>100</td>
<td>0110 0100</td>
</tr>
<tr>
<td>-5</td>
<td>1111 1011</td>
</tr>
<tr>
<td>-8</td>
<td>1111 1000</td>
</tr>
</tbody></table>
<blockquote>
<p>第一位为符号位，负数等于正数取反 +1</p>
</blockquote>
<p>那浮点类型是如何用这么少的字节（如float 4字节）表示这么大（float 最大 3.4028235E38）的数字呢？</p>
<h2 id="浮点类型是如何存储的"><a href="#浮点类型是如何存储的" class="headerlink" title="浮点类型是如何存储的"></a>浮点类型是如何存储的</h2><h3 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h3><p>浮点数，是属于有理数中某特定子集的数的数字表示，在计算机中用以近似表示任意某个实数。具体的说，这个实数由一个整数或定点数（即尾数）乘以某个基数（计算机中通常是2）的整数次幂得到，这种表示方法类似于基数为10的科学计数法。</p>
<h3 id="科学计数法"><a href="#科学计数法" class="headerlink" title="科学计数法"></a>科学计数法</h3><p>科学计数法是一种记数的方法。把一个数表示成a与10的n次幂相乘的形式（1≤|a|&lt;10，a不为分数形式，n为整数），这种记数法叫做科学计数法。当我们要标记或运算某个较大或较小且位数较多时，用科学计数法免去浪费很多空间和时间。</p>
<h3 id="java中的浮点数字遵循-IEEE-754-标准"><a href="#java中的浮点数字遵循-IEEE-754-标准" class="headerlink" title="java中的浮点数字遵循 IEEE 754 标准"></a>java中的浮点数字遵循 IEEE 754 标准</h3><p>这也是一种目前最常用的浮点数标准！为许多CPU与浮点运算器所采用。</p>
<p>简单的说就是将一个浮点数字拆成3个部分（符号部分、指数部分、小数部分） 存储在连续的bit中，类似科学计数法。</p>
<p>用 {S，E，M}来表示一个数 V 的，即 <strong>V &#x3D;（-1）S × M × 2E</strong>，如下：</p>
<table>
<thead>
<tr>
<th>S（符号位）</th>
<th>E（指数位）</th>
<th>M（有效数字位）</th>
</tr>
</thead>
</table>
<p>其中：</p>
<ul>
<li>符号位 s（Sign）决定数是正数（s＝0）还是负数（s＝1），而对于数值 0 的符号位解释则作为特殊情况处理。</li>
<li>有效数字位 M（Significand）是二进制小数，它的取值范围为 0~1 。它也被称为尾数位（Mantissa）、系数位（Coefficient），甚至还被称作“小数”。</li>
<li>指数位 E（Exponent）是 2 的幂（可能是负数，为了表示负数实际指数需要加一个偏移量），它的作用是对浮点数加权。</li>
</ul>
<h3 id="IEEE-754浮点数规范"><a href="#IEEE-754浮点数规范" class="headerlink" title="IEEE 754浮点数规范"></a>IEEE 754浮点数规范</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+- d.ddd...d * β^e   (0 &lt;= di &lt; β)  </span><br></pre></td></tr></table></figure>

<p>其中d.dd…d 为有效数字，β为基数，e 为指数</p>
<p>有效数字中 数字的个数 称为<strong>精度</strong>，我们可以用 p 来表示，即可称为 p 位有效数字精度。<br>每个数字 d 介于 <strong>0</strong> 和基数 <strong>β</strong> 之间，包括 0。</p>
<h4 id="十进制表示"><a href="#十进制表示" class="headerlink" title="十进制表示"></a>十进制表示</h4><p>对十进制的浮点数，即基数 β 等于 10 的浮点数而言，上面的表达式非常容易理解。<br>如 12.34，我们可以根据上面的表达式表达为：<br><strong>1×10<sup>1</sup> + 2×10<sup>0</sup> + 3×10<sup>-1</sup> + 4×10<sup>-2</sup></strong><br>其规范的浮点数表达为：**1.234×10<sup>1</sup>**。</p>
<h4 id="二进制表示"><a href="#二进制表示" class="headerlink" title="二进制表示"></a>二进制表示</h4><p>但对二进制来说，上面的表达式同样可以简单地表达。<br>唯一不同之处在于：二进制的 β 等于 2，而每个数字 d 只能在 0 和 1 之间取值。  </p>
<p>如二进制数 <strong>1001.101</strong>，我们可以根据上面的表达式表达为：<br><strong>1×2<sup>3</sup> + 0×2<sup>2</sup> + 0×2<sup>1</sup> + 1×2<sup>0</sup> + 1×2<sup>-1</sup> + 0×2<sup>-2</sup> + 1×2<sup>-3</sup></strong><br>其规范浮点数表达为：**1.001101×2<sup>3</sup>**。</p>
<h3 id="二进制转换为十进制"><a href="#二进制转换为十进制" class="headerlink" title="二进制转换为十进制"></a>二进制转换为十进制</h3><p>二进制数 1001.101 转成十进制如下：</p>
<blockquote>
<p> &#x3D; 1 × 2<sup>3</sup> + 0 × 2<sup>2</sup> + 0 × 2<sup>1</sup> + 1 × 2<sup>0</sup> + 1 × 2<sup>-1</sup> + 0 × 2<sup>-2</sup> + 1×2<sup>-3</sup><br> &#x3D; 8 + 0 + 0 + 1 + 1&#x2F;2 + 0 + 1&#x2F;8<br> &#x3D; 9又1&#x2F;8 (9又8分之1)<br> &#x3D; 9.625  </p>
</blockquote>
<p>由上面的等式，我们可以得出：<br>向左移动二进制小数点一位相当于这个数除以 2，而向右移动二进制小数点一位相当于这个数乘以 2。<br>如 101.11 &#x3D; 5又3&#x2F;4  (5.75)，向左移动一位，得到 10.111 &#x3D; 2又7&#x2F;8 （2.875）。</p>
<p>除此之外，我们还可以得到这样一个基本规律：<br>一个十进制小数要能用浮点数精确地表示，最后一位必须是 5（当然这是必要条件，并非充分条件）。<br>如下面的示例所示：</p>
<table>
<thead>
<tr>
<th>二进制小数</th>
<th>2的多少次方</th>
<th>十进制的小数</th>
</tr>
</thead>
<tbody><tr>
<td>0.1</td>
<td>2<sup>-1</sup></td>
<td>0.5</td>
</tr>
<tr>
<td>0.01</td>
<td>2<sup>-2</sup></td>
<td>0.25</td>
</tr>
<tr>
<td>0.001</td>
<td>2<sup>-3</sup></td>
<td>0.125</td>
</tr>
<tr>
<td>0.0001</td>
<td>2<sup>-4</sup></td>
<td>0.0625</td>
</tr>
<tr>
<td>0.00001</td>
<td>2<sup>-5</sup></td>
<td>0.03125</td>
</tr>
<tr>
<td>0.000001</td>
<td>2<sup>-6</sup></td>
<td>0.015625</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody></table>
<h3 id="十进制转换为二进制"><a href="#十进制转换为二进制" class="headerlink" title="十进制转换为二进制"></a>十进制转换为二进制</h3><p>基本换算方法：<br>将10进制的数拆分成整数和小数两个部分<br>整数部分除以2，取余数；小数部分乘以2，取整数位。  </p>
<p>示例：<br>将十进制 1.1 转成 二进制</p>
<p><strong>整数部分：1</strong><br>1 </p>
<p><strong>小数部分：0.1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">0.1 *2 = 0.2 -&gt; 0</span><br><span class="line">0.2 *2 = 0.4 -&gt; 0</span><br><span class="line">0.4 *2 = 0.8 -&gt; 0</span><br><span class="line">0.8 *2 = 1.6 -&gt; 1</span><br><span class="line">0.6 *2 = 1.2 -&gt; 1</span><br><span class="line">0.2 *2 = 0.4 -&gt; 0</span><br><span class="line">0.4 *2 = 0.8 -&gt; 0</span><br><span class="line">0.8 *2 = 1.6 -&gt; 1</span><br><span class="line">0.6 *2 = 1.2 -&gt; 1</span><br><span class="line">0.2 *2 = 0.4 -&gt; 0</span><br><span class="line">0.4 *2 = 0.8 -&gt; 0</span><br><span class="line">0.8 *2 = 1.6 -&gt; 1</span><br><span class="line">0.6 *2 = 1.2 -&gt; 1</span><br><span class="line">0.2 *2 = 0.4 -&gt; 0</span><br><span class="line">0.4 *2 = 0.8 -&gt; 0</span><br><span class="line">0.8 *2 = 1.6 -&gt; 1</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>二进制形式表示为：<br>1.000110011001100110011…</p>
<h4 id="再将上面的数换算成10进制"><a href="#再将上面的数换算成10进制" class="headerlink" title="再将上面的数换算成10进制"></a>再将上面的数换算成10进制</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1 + 1/16 + 1/32 + 1/256 + 1/512  + ...</span><br><span class="line">约等于  </span><br><span class="line">（32 + 16 + 2 + 1）/512    </span><br><span class="line">约等于  </span><br><span class="line">  51/512  </span><br><span class="line">约等于  </span><br><span class="line">  0.099609375</span><br></pre></td></tr></table></figure>

<p>再加上整数1，约等于：<br><strong>1.099609375</strong>  </p>
<p><strong>计算的位数越多越精确</strong></p>
<p><strong>注意：</strong><br>二进制小数不像整数一样，只要位数足够，它就可以表示所有整数。<br>在有限长度的编码中，二进制小数一般无法精确的表示任意小数，比如十进制小数0.2，我们并不能将其准确的表示为一个二进制数，只能增加二进制长度提高表示的精度。</p>
<blockquote>
<p>十进制的0.2 转换成二进制为：0.00110011001100110011001100110011001100110011001100110……</p>
</blockquote>
<hr>
<h3 id="java-API-中对Double-和-Float-类型的描述"><a href="#java-API-中对Double-和-Float-类型的描述" class="headerlink" title="java API 中对Double 和 Float 类型的描述"></a>java API 中对Double 和 Float 类型的描述</h3><h4 id="Double-双精度浮点数-64bit-（8byte）"><a href="#Double-双精度浮点数-64bit-（8byte）" class="headerlink" title="Double 双精度浮点数 64bit （8byte）"></a>Double 双精度浮点数 64bit （8byte）</h4><p>根据 IEEE 754 浮点“双精度格式”位布局。 </p>
<ul>
<li>第 63 位（掩码 0x8000000000000000L 选定的位）表示浮点数的符号。</li>
<li>第 62-52 位（掩码 0x7ff0000000000000L 选定的位）表示指数。</li>
<li>第 51-0 位（掩码 0x000fffffffffffffL 选定的位）表示浮点数的有效数字（有时也称为尾数）。</li>
</ul>
<p>如果参数是正无穷大，则结果为 0x7ff0000000000000L。<br>如果参数是负无穷大，则结果为 0xfff0000000000000L。<br>如果参数是 NaN，则结果为 0x7ff8000000000000L。   </p>
<h4 id="Float-单精度浮点数-32bit-（4byte）"><a href="#Float-单精度浮点数-32bit-（4byte）" class="headerlink" title="Float 单精度浮点数 32bit （4byte）"></a>Float 单精度浮点数 32bit （4byte）</h4><p>根据 IEEE 754 浮点“单一格式”位布局。 </p>
<ul>
<li>第 31 位（掩码 0x80000000 选定的位）表示浮点数的符号。</li>
<li>第 30-23 位（掩码 0x7f800000 选定的位）表示指数。</li>
<li>第 22-0 位（掩码 0x007fffff 选定的位）表示浮点数的有效位数（有时也称为尾数）。</li>
</ul>
<p>如果参数为正无穷大，则结果为 0x7f800000。<br>如果参数为负无穷大，则结果为 0xff800000。<br>如果参数为 NaN，则结果为 0x7fc00000。 </p>
<h4 id="掩码位说明"><a href="#掩码位说明" class="headerlink" title="掩码位说明"></a>掩码位说明</h4><p>这里以 double类型说明</p>
<ul>
<li><p>第 63 位（掩码 0x8000000000000000L 选定的位）表示浮点数的符号。<br> 转成二进制<br> 1000000000000000000000000000000000000000000000000000000000000000</p>
</li>
<li><p>第 62-52 位（掩码 0x7ff0000000000000L 选定的位）表示指数。<br> 转成二进制<br> 0111111111110000000000000000000000000000000000000000000000000000</p>
</li>
<li><p>第 51-0 位（掩码 0x000fffffffffffffL 选定的位）表示浮点数的有效数字（有时也称为尾数）。<br> 转成二进制<br> 0000000000001111111111111111111111111111111111111111111111111111</p>
</li>
</ul>
<p>将一个浮点数与上面的掩码进行与运算，即可得到对应的 符号位、指数位、尾数位 的值。</p>
<blockquote>
<p>这里的多少多少位是从右往左数的，当转成2进制不够64位时在前面补零即可</p>
</blockquote>
<hr>
<h4 id="按照浮点数计算规范要求：（划重点）"><a href="#按照浮点数计算规范要求：（划重点）" class="headerlink" title="按照浮点数计算规范要求：（划重点）"></a>按照浮点数计算规范要求：（划重点）</h4><ul>
<li>符号为 1表示负数，0表示正数</li>
<li>指数 &#x3D;（为了表示负指数，实际的指数需要加上一个值，双精度为 2e10-1 &#x3D; 1023）&#x3D; <strong>实际指数 + 1023</strong></li>
<li>有效数字省略了最高的一位1，<strong>去掉小数点左侧的 1</strong>，并用 0 在右侧补齐。</li>
</ul>
<h5 id="故前面十进制数-1-1-的二进制形式："><a href="#故前面十进制数-1-1-的二进制形式：" class="headerlink" title="故前面十进制数(1.1)的二进制形式："></a>故前面十进制数(1.1)的二进制形式：</h5><p><strong>1.000110011001100110011…</strong></p>
<h5 id="用浮点类型表示："><a href="#用浮点类型表示：" class="headerlink" title="用浮点类型表示："></a>用浮点类型表示：</h5><ul>
<li>符号位：0</li>
<li>指数为：0 + 1023 &#x3D; 1111111111 &#x3D; (不够11位前面补0) &#x3D; 01111111111</li>
<li>有效位：000110011001100110011…</li>
</ul>
<p>所以存为：<br><strong>0 01111111111 000110011001100110011…</strong></p>
<h4 id="用java代码输出进行验证"><a href="#用java代码输出进行验证" class="headerlink" title="用java代码输出进行验证"></a>用java代码输出进行验证</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(Long.toBinaryString(Double.doubleToLongBits(1.1)));</span><br><span class="line">//11111111110001100110011001100110011001100110011001100110011010</span><br><span class="line">//这种情况前面要补两个0</span><br><span class="line">//0011111111110001100110011001100110011001100110011001100110011010</span><br><span class="line"></span><br><span class="line">System.out.println(Long.toBinaryString(Double.doubleToLongBits(-1.1)));</span><br><span class="line">//1011111111110001100110011001100110011001100110011001100110011010</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="浮点数精度问题"><a href="#浮点数精度问题" class="headerlink" title="浮点数精度问题"></a>浮点数精度问题</h2><p>根据 IEEE 754 规范</p>
<ul>
<li>Float 单精度浮点数，有效位数只有23 bit位</li>
<li>Double 双精度浮点数，有效位数只有52 bit位</li>
</ul>
<p>在二进制，第一个有效数字必定是“1”，因此这个“1”并不会存储。<br>单精和双精浮点数的有效数字分别是有存储的23和52个位，加上最左边没有存储的第1个位，即是24和53个位。  </p>
<p>通过计算其能表示的最大值，换十进制来看其精度：</p>
<ul>
<li><p>Float<br>二进制的24个1 &#x3D;&gt; （二进制） 111111111111111111111111 &#x3D;&gt; （计算） 2^24 - 1  &#x3D;&gt; (十进制) 16777215 &#x3D;&gt; （Float 精度最大8位数）</p>
</li>
<li><p>Double<br>二进制的53个1 &#x3D;&gt; （二进制） 11111111111111111111111111111111111111111111111111111 &#x3D;&gt; （计算）2^53 - 1 &#x3D;&gt; （十进制）9007199254740991 &#x3D;&gt; (Double 精度最大16位数)</p>
</li>
</ul>
<h3 id="为什么会丢失精度"><a href="#为什么会丢失精度" class="headerlink" title="为什么会丢失精度"></a>为什么会丢失精度</h3><p>浮点运算很少是精确的，只要是超过精度能表示的范围就会产生误差。而往往产生误差不是因为数的大小，而是因为数的精度。</p>
<p>我自己理解为分两种情况（这个不一定是对）</p>
<ol>
<li>当有小数时，浮点数本身就不能精确记录其数值，只记了一个近似值，此时进行计算就很可能不对</li>
<li>有效位数不够用了，导致舍入</li>
</ol>
<h4 id="1、不能精确记录其数值"><a href="#1、不能精确记录其数值" class="headerlink" title="1、不能精确记录其数值"></a>1、不能精确记录其数值</h4><p>通过上面的转换示例，我们知道小数的二进制表示一般都不是精确的，在有限的精度下只能尽量的表示近似值</p>
<p>值本身就不是精确的，再进行计算就很可能产生误差</p>
<h5 id="0-1-0-2-0-30000000000000004"><a href="#0-1-0-2-0-30000000000000004" class="headerlink" title="0.1+0.2&#x3D;0.30000000000000004"></a>0.1+0.2&#x3D;0.30000000000000004</h5><h5 id="示例代码："><a href="#示例代码：" class="headerlink" title="示例代码："></a>示例代码：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">double d1 = 0.1;</span><br><span class="line">double d2 = 0.2;</span><br><span class="line">double d3 = d1 + d2;</span><br><span class="line">System.out.println(d3);</span><br><span class="line">System.out.println(&quot;######################################&quot;);</span><br><span class="line">System.out.println(new BigDecimal(d1));</span><br><span class="line">System.out.println(new BigDecimal(d2));</span><br><span class="line">System.out.println(new BigDecimal(d3));</span><br><span class="line"></span><br><span class="line">System.out.println(&quot;######################################&quot;);</span><br><span class="line">System.out.println(Long.toBinaryString(Double.doubleToLongBits(d1)));</span><br><span class="line">System.out.println(Long.toBinaryString(Double.doubleToLongBits(d2)));</span><br><span class="line">System.out.println(Long.toBinaryString(Double.doubleToLongBits(d3)));</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">0.30000000000000004</span><br><span class="line">######################################</span><br><span class="line">0.1000000000000000055511151231257827021181583404541015625</span><br><span class="line">0.200000000000000011102230246251565404236316680908203125</span><br><span class="line">0.3000000000000000444089209850062616169452667236328125</span><br><span class="line">######################################</span><br><span class="line">11111110111001100110011001100110011001100110011001100110011010</span><br><span class="line">11111111001001100110011001100110011001100110011001100110011010</span><br><span class="line">11111111010011001100110011001100110011001100110011001100110100</span><br></pre></td></tr></table></figure>

<p><strong>0.1</strong><br>原始值： 0 01111111011  1001100110011001100110011001100110011001100110011010<br>指数：1019 -1023 &#x3D; -4<br>二进制形式：<br>0.00011001100110011001100110011001100110011001100110011010</p>
<p><strong>0.2</strong><br>原始值：0 01111111100  1001100110011001100110011001100110011001100110011010<br>指数：1020 -1023 &#x3D; -3<br>二进制形式：<br>0.001001100110011001100110011001100110011001100110011010</p>
<p><strong>0.3</strong><br>原始值：0 01111111101  0011001100110011001100110011001100110011001100110100<br>指数：1021 &#x3D; -2<br>二进制形式：<br>0.010011001100110011001100110011001100110011001100110100</p>
<p><strong>二进制加法运算</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0.00011001100110011001100110011001100110011001100110011010</span><br><span class="line">+</span><br><span class="line">0.001001100110011001100110011001100110011001100110011010</span><br><span class="line">=</span><br><span class="line">0.010011001100110011001100110011001100110011001100110100</span><br></pre></td></tr></table></figure>

<h5 id="其他示例："><a href="#其他示例：" class="headerlink" title="其他示例："></a>其他示例：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">double a = 0.03;</span><br><span class="line">double b = 0.01;</span><br><span class="line">System.out.println(a - b); </span><br><span class="line">//结果 0.019999999999999997</span><br><span class="line"></span><br><span class="line">double x = 10.2;</span><br><span class="line">double y = 10.03;</span><br><span class="line">System.out.println(x + y); </span><br><span class="line">//结果 20.229999999999997</span><br><span class="line"></span><br><span class="line">double dx = 1.099999999999999999999999999999d;</span><br><span class="line">System.out.println(dx);</span><br><span class="line">//结果 1.1</span><br><span class="line"></span><br><span class="line">double dy = 1.1000000000000000000000000000001d;</span><br><span class="line">System.out.println(dy);</span><br><span class="line">//结果 1.1</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2、有效位数不够用"><a href="#2、有效位数不够用" class="headerlink" title="2、有效位数不够用"></a>2、有效位数不够用</h4><p>这里用float验证，float最大的精度是8位数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 有效位数不够</span><br><span class="line">float f = 1.23456789f;</span><br><span class="line">System.out.println(f);   // 1.2345679   最大只能有8位</span><br><span class="line"></span><br><span class="line">System.out.println(&quot;=====================&quot;);</span><br><span class="line">float f1 = 10000f;</span><br><span class="line">System.out.println(f1);  // 10000.0</span><br><span class="line">float f2 = 1.123456f;</span><br><span class="line">System.out.println(f2);  // 1.123456</span><br><span class="line"></span><br><span class="line">// 相加之后有效位数不够</span><br><span class="line">float f3 = f1 + f2;</span><br><span class="line">System.out.println(f3);  // 10001.123   位数不够，后面的被省略了</span><br></pre></td></tr></table></figure>

<h3 id="关于舍入"><a href="#关于舍入" class="headerlink" title="关于舍入"></a>关于舍入</h3><p>对于不能精确的表示的数，采取一种系统的方法：找到“最接近”的匹配值，它可以用期望的浮点形式表现出来，这就是舍入。</p>
<p>对于舍入，可以有很多种规则，可以向上舍入，向下舍入，向偶数舍入。如果我们只采用前两种中的一种，就会造成平均数过大或者过小，实际上这时候就是引入了统计偏差。如果是采用偶数舍入，则有一半的机会是向上舍入，一半的机会是向下舍入，这样子可以避免统计偏差。而 IEEE 754 就是采用向最近偶数舍入（round to nearest even）的规则。</p>
<p>（这段是网上抄的）</p>
<hr>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="大端-小端问题"><a href="#大端-小端问题" class="headerlink" title="大端 小端问题"></a>大端 小端问题</h3><p><strong>这里以java语言示例，用大端的方式示例（网络序）</strong></p>
<p>java中是以大端模式存储的，java对我们屏蔽了内部字节顺序的问题以实现跨平台！</p>
<p>实际在不同的cpu架构下，存储方式不同，我们常用的X86是以小端的模式存储的。</p>
<p>网络传输一般采用大端序，也被称之为网络字节序，或网络序。IP协议中定义大端序为网络字节序。</p>
<hr>
<h3 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h3><h4 id="二进制字符串转成Double"><a href="#二进制字符串转成Double" class="headerlink" title="二进制字符串转成Double"></a>二进制字符串转成Double</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    // 4607632778762754458</span><br><span class="line">    String s = &quot;0011111111110001100110011001100110011001100110011001100110011010&quot;;</span><br><span class="line">    System.out.println(&quot;二进制字符串 = &quot; + s);</span><br><span class="line">    long l = Long.parseLong(s, 2);</span><br><span class="line">    System.out.println(&quot;转成Long = &quot; + l);</span><br><span class="line">    double d = Double.longBitsToDouble(l);</span><br><span class="line">    System.out.println(&quot;再将Long转成Double = &quot; + d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">二进制字符串 = 0011111111110001100110011001100110011001100110011001100110011010</span><br><span class="line">转成Long = 4607632778762754458</span><br><span class="line">再将Long转成Double = 1.1</span><br></pre></td></tr></table></figure>

<h4 id="写内存的方式转Double"><a href="#写内存的方式转Double" class="headerlink" title="写内存的方式转Double"></a>写内存的方式转Double</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * bit字符串转Double</span><br><span class="line"> * </span><br><span class="line"> * @param bitStr 64位的01字符串</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">public static void bit2Double(String bitStr) throws Exception &#123;</span><br><span class="line">    String[] array = splitString(bitStr, 8);</span><br><span class="line">    System.out.println(Arrays.toString(array));</span><br><span class="line"></span><br><span class="line">    Unsafe unsafe = getUnsafe();</span><br><span class="line">    long address = unsafe.allocateMemory(8L);</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; array.length; i++) &#123;</span><br><span class="line">        String bits = array[i];</span><br><span class="line">        byte bt = (byte) Integer.parseInt(bits, 2);</span><br><span class="line">        // 因为实际上是小端模式存储的，所以这里从后面开始写入</span><br><span class="line">        unsafe.putByte(address + (7 - i), (byte) bt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    long lVal = unsafe.getLong(address);</span><br><span class="line">    System.out.println(&quot;对应的long值是：&quot; + lVal);</span><br><span class="line">    System.out.println(Long.toBinaryString(lVal));</span><br><span class="line"></span><br><span class="line">    double dVal = unsafe.getDouble(address);</span><br><span class="line">    System.out.println(&quot;转成Double 类型是：&quot; + dVal);</span><br><span class="line">    System.out.println(Long.toBinaryString(Double.doubleToLongBits(dVal)));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static String[] splitString(String source, int length) &#123;</span><br><span class="line">    String[] array = new String[length];</span><br><span class="line">    for (int i = 0; i &lt; length; i++) &#123;</span><br><span class="line">        array[i] = source.substring(i * length, (i + 1) * length);</span><br><span class="line">    &#125;</span><br><span class="line">    return array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static Unsafe getUnsafe() throws Exception &#123;</span><br><span class="line">    Field f = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);</span><br><span class="line">    f.setAccessible(true);</span><br><span class="line">    Unsafe unsafe = (Unsafe) f.get(null);</span><br><span class="line">    return unsafe;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A4%A7%E7%AB%AF%E5%92%8C%E5%B0%8F%E7%AB%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A4%A7%E7%AB%AF%E5%92%8C%E5%B0%8F%E7%AB%AF/" class="post-title-link" itemprop="url">大端和小端</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-09-06 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-06T00:00:00+08:00">2020-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="字节序"><a href="#字节序" class="headerlink" title="字节序"></a>字节序</h3><p><strong>字节顺序</strong>，又称之为：<strong>端序</strong> 或 <strong>尾序</strong>。在计算机科学领域中指的是：电脑内存 或者在网络通讯链路中，由多个字节组成的<strong>字</strong>的排列方式。</p>
<p>由于不同架构的CPU处理多个字节数据的顺序不一样，比如x86的是小段端模式，KEIL C51是大端模式。但是后来互联网流行，TCP&#x2F;IP协议规定为大端模式，又称为：network order。</p>
<h3 id="大端和小端"><a href="#大端和小端" class="headerlink" title="大端和小端"></a>大端和小端</h3><p>在计算机体系中我们是以字节为单位的，每个地址单元都对应着一个字节，一个字节为8bit。<br>在编程语言中一个long类型占32bit，那就需要4个字节来存储，那按照什么样的顺序将这四个字节写到内存中？<br>因此就出现了大端存储模式和小端存储模式。</p>
<p><strong>大端（Big-Endian）：</strong>  数据的高位字节在前（内存的低地址），低位字节在后。这样的存储模式类似于把数据当做字符串处理，内存地址由小到大增长，而数据从高位字节开始写入。  </p>
<blockquote>
<p>这种方式符合人类的阅读习惯！</p>
</blockquote>
<p><strong>小端（Little-Endian）：</strong> 数据的低位字节在前（内存的低地址），高位字节在后。这种存储模式将地址的高低和数据位权有效地结合起来，高地址部分权值高，低地址部分权值低。</p>
<p>示例：</p>
<blockquote>
<p>如：<br>32位的16进制数：0x1A2B3C4D  在内存中的存储</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">内存地址： 00  01  02  03</span><br><span class="line">------------------------------</span><br><span class="line">小端模式： 4D  3C  2B  1A</span><br><span class="line">大端模式： 1A  2B  3C  4D</span><br></pre></td></tr></table></figure>


<h3 id="java中的大端和小端"><a href="#java中的大端和小端" class="headerlink" title="java中的大端和小端"></a>java中的大端和小端</h3><p>Java二进制文件中的所有内容均按大端顺序存储。这种存储方式也被称为network order。这意味着，如果仅仅是用java，则在所有的平台上（如Mac、 PC、 UNIX等）<br>所有文件的处理方式都相同，可以自由的进行二进制文件的交换，而无需担心字节顺序的问题。  </p>
<p>java对我们隐藏了内部字节顺序的问题！</p>
<p>但是当我们与某些不是用Java编写的使用小端顺序的程序交换数据文件时，就会出现问题。最常见的是使用C编写的程序。某些平台在内部使用大端顺序（Mac，IBM 390），有些使用小端序（Intel）。  </p>
<p>C语言默认是小端模式。<br>如果java 要读取C 写的二进制文件，就要涉及到大小端转换的问题。</p>
<hr>
<h3 id="java代码测试"><a href="#java代码测试" class="headerlink" title="java代码测试"></a>java代码测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public static void printSystemInfo() &#123;</span><br><span class="line">	System.out.println(&quot;##########################################&quot;);</span><br><span class="line">	System.out.println(&quot;系统名称：&quot; + System.getProperty(&quot;os.name&quot;));</span><br><span class="line">	System.out.println(&quot;系统架构：&quot; + System.getProperty(&quot;os.arch&quot;));</span><br><span class="line">	System.out.println(&quot;系统版本：&quot; + System.getProperty(&quot;os.version&quot;));</span><br><span class="line">	System.out.println(&quot;##########################################&quot;);</span><br><span class="line">	System.out.println(&quot;&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static Unsafe getUnsafe() throws Exception &#123;</span><br><span class="line">	Field f = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);</span><br><span class="line">	f.setAccessible(true);</span><br><span class="line">	Unsafe unsafe = (Unsafe) f.get(null);</span><br><span class="line">	return unsafe;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) throws Exception &#123;</span><br><span class="line">	printSystemInfo();</span><br><span class="line">	try &#123;</span><br><span class="line">		Unsafe UNSAFE = getUnsafe();</span><br><span class="line"></span><br><span class="line">		int intVal = 0x1A2B3C4D;</span><br><span class="line">		System.out.println(&quot;原始值：十六进制：&quot; + Integer.toHexString(intVal) + &quot;  对应十进制：&quot; + intVal);</span><br><span class="line"></span><br><span class="line">		// 分配4个字节的内存</span><br><span class="line">		long address = UNSAFE.allocateMemory(4);</span><br><span class="line">		// 存放int类型的数据，占4个字节</span><br><span class="line">		UNSAFE.putInt(address, intVal);</span><br><span class="line">		byte b = UNSAFE.getByte(address);</span><br><span class="line">		// 通过getByte方法获取刚才存放的int，取第一个字节</span><br><span class="line">		// 如果是大端，存放顺序 —&gt; 1A,2B,3C,4D，取第一位便是0x1A</span><br><span class="line">		// 如果是小端，存放顺序 —&gt; 4D,3C,2B,1A ，取第一位便是0x4D</span><br><span class="line">		System.out.println(&quot;取到的第一个字节：&quot; + Integer.toHexString(b));</span><br><span class="line">		ByteOrder byteOrder;</span><br><span class="line">		switch (b) &#123;</span><br><span class="line">			case 0x1A:</span><br><span class="line">				System.out.println(&quot;当前使用：大端序&quot;);</span><br><span class="line">				byteOrder = ByteOrder.BIG_ENDIAN;</span><br><span class="line">				break;</span><br><span class="line">			case 0x4D:</span><br><span class="line">				System.out.println(&quot;当前使用：小端序&quot;);</span><br><span class="line">				byteOrder = ByteOrder.LITTLE_ENDIAN;</span><br><span class="line">				break;</span><br><span class="line">			default:</span><br><span class="line">				byteOrder = null;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(byteOrder);</span><br><span class="line">		// 这里在X86架构的windows机器上跑，输出结果为：</span><br><span class="line">		// LITTLE_ENDIAN</span><br><span class="line"></span><br><span class="line">		// 然后我们重新从内存中读取int</span><br><span class="line">		int val2 = UNSAFE.getInt(address);</span><br><span class="line">		System.out.println(&quot;重新从内存中读取的值：&quot; + val2);</span><br><span class="line">	&#125; catch (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h4><h5 id="window平台"><a href="#window平台" class="headerlink" title="window平台"></a>window平台</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">##########################################</span><br><span class="line">系统名称：Windows 7</span><br><span class="line">系统架构：amd64</span><br><span class="line">系统版本：6.1</span><br><span class="line">##########################################</span><br><span class="line"></span><br><span class="line">原始值：十六进制：1a2b3c4d  对应十进制：439041101</span><br><span class="line">取到的第一个字节：4d</span><br><span class="line">当前使用：小端序</span><br><span class="line">LITTLE_ENDIAN</span><br><span class="line">重新从内存中读取的值：439041101</span><br></pre></td></tr></table></figure>

<h5 id="linux平台"><a href="#linux平台" class="headerlink" title="linux平台"></a>linux平台</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">##########################################</span><br><span class="line">系统名称：Linux</span><br><span class="line">系统架构：amd64</span><br><span class="line">系统版本：2.6.32-642.el6.x86_64</span><br><span class="line">##########################################</span><br><span class="line"></span><br><span class="line">原始值：十六进制：1a2b3c4d  对应十进制：439041101</span><br><span class="line">取到的第一个字节：4d</span><br><span class="line">当前使用：小端序</span><br><span class="line">LITTLE_ENDIAN</span><br><span class="line">重新从内存中读取的值：439041101</span><br></pre></td></tr></table></figure>





      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Windows/windows%E4%B8%8B%E5%8F%B3%E9%94%AE%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6Hash%E5%80%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Windows/windows%E4%B8%8B%E5%8F%B3%E9%94%AE%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6Hash%E5%80%BC/" class="post-title-link" itemprop="url">windows下右键查看文件Hash值</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-31 22:01:00" itemprop="dateCreated datePublished" datetime="2020-08-31T22:01:00+08:00">2020-08-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Windows/" itemprop="url" rel="index"><span itemprop="name">Windows</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>237</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="CMD命令"><a href="#CMD命令" class="headerlink" title="CMD命令"></a>CMD命令</h3><p><strong>certutil -hashfile filename [MD5|SHA1|SHA256]</strong></p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;certutil -hashfile &quot;D:\test\123.txt&quot; MD5</span><br><span class="line">MD5 的 D:\test\123.txt 哈希:</span><br><span class="line">3aed2464da46a2719ff1bf0766d2754f</span><br><span class="line">CertUtil: -hashfile 命令成功完成。</span><br></pre></td></tr></table></figure>

<h3 id="添加“右键-发送到”快速计算校验值"><a href="#添加“右键-发送到”快速计算校验值" class="headerlink" title="添加“右键&gt;发送到”快速计算校验值"></a>添加“右键&gt;发送到”快速计算校验值</h3><ol>
<li><p>在文件夹地址栏输入 <strong>shell:sendto</strong> 进入 “发送到” 引用目录  </p>
</li>
<li><p>新建批处理文件（如：checksum.bat），将下面的代码拷贝至文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@echo OFF</span><br><span class="line">:LOOP</span><br><span class="line">    set index=%1</span><br><span class="line">    if %index%! == ! goto END</span><br><span class="line">	echo.</span><br><span class="line">    echo File   : %index%</span><br><span class="line">    echo.</span><br><span class="line">    set /p=&quot;MD5    : &quot;&lt;nul</span><br><span class="line">    certutil -hashfile &quot;%index%&quot; MD5|findstr /V &quot;MD5&quot;|findstr /V &quot;CertUtil&quot;</span><br><span class="line">    set /p=&quot;SHA1   : &quot;&lt;nul</span><br><span class="line">	certutil -hashfile &quot;%index%&quot; SHA1|findstr /V &quot;SHA1&quot;|findstr /V &quot;CertUtil&quot;</span><br><span class="line">	set /p=&quot;SHA256 : &quot;&lt;nul</span><br><span class="line">	certutil -hashfile &quot;%index%&quot; SHA256|findstr /V &quot;SHA256&quot;|findstr /V &quot;CertUtil&quot;</span><br><span class="line">	shift</span><br><span class="line">	goto LOOP</span><br><span class="line">:END</span><br><span class="line">echo.</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
</li>
<li><p>在资源管理器中，右键需要校验的文件，发送至该文件即可<br>ps：也可将批处理文件放在别处，创建文件的快捷方式，然后将快捷方式移动到引用目录</p>
</li>
</ol>
<p>效果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">File   : D:\tools\bin\clear.bat</span><br><span class="line"></span><br><span class="line">MD5    : 98bbdca979f85ee3a491769b89021306</span><br><span class="line">SHA1   : ead014790c1adfdfaf10c5ee701d3e59080a662f</span><br><span class="line">SHA256 : 58969ebe81e0669a2d4a995a9a0c62dcae5a711ea61126ddf8eab868a924112b</span><br><span class="line"></span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E7%A1%AC%E4%BB%B6%E4%B8%8E%E7%89%A9%E8%81%94%E7%BD%91/%E8%B7%AF%E7%94%B1%E5%99%A8&%E5%85%89%E7%8C%AB/%E9%85%8D%E7%BD%AEIPTV%E7%94%A8wifi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E7%A1%AC%E4%BB%B6%E4%B8%8E%E7%89%A9%E8%81%94%E7%BD%91/%E8%B7%AF%E7%94%B1%E5%99%A8&%E5%85%89%E7%8C%AB/%E9%85%8D%E7%BD%AEIPTV%E7%94%A8wifi/" class="post-title-link" itemprop="url">配置IPTV用wifi</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-11 23:41:00" itemprop="dateCreated datePublished" datetime="2020-08-11T23:41:00+08:00">2020-08-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%A1%AC%E4%BB%B6%E4%B8%8E%E7%89%A9%E8%81%94%E7%BD%91/" itemprop="url" rel="index"><span itemprop="name">硬件与物联网</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%A1%AC%E4%BB%B6%E4%B8%8E%E7%89%A9%E8%81%94%E7%BD%91/%E8%B7%AF%E7%94%B1%E5%99%A8-%E5%85%89%E7%8C%AB/" itemprop="url" rel="index"><span itemprop="name">路由器&光猫</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>346</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>使用原因：弱电箱在门口，光猫在弱电箱里面，从弱电箱到电视机只有一根网线，路由器放到电视柜上面，这根网线给了路由器用了，IPTV没有线。</p>
<p>其他方案：</p>
<ol>
<li>8芯网线分成两根4芯的网线（速度只有100M）</li>
<li>电力猫（干扰大）</li>
<li>使用网管交换机，用vlan （要另外买设备）</li>
<li>路由器和光猫上分别配置Vlan</li>
</ol>
<h3 id="用超级账号登陆光猫"><a href="#用超级账号登陆光猫" class="headerlink" title="用超级账号登陆光猫"></a>用超级账号登陆光猫</h3><blockquote>
<p>如何获取超级账号密码需要另外想办法<br>有限地方的超级账号密码都是同一个，网上能查得到</p>
</blockquote>
<h3 id="去掉宽带的无线绑定"><a href="#去掉宽带的无线绑定" class="headerlink" title="去掉宽带的无线绑定"></a>去掉宽带的无线绑定</h3><p><strong>网络 -&gt;  宽带设置</strong>  </p>
<p>连接名称 选择 2_INTERNET_R_VID_<br>将下面  绑定端口： 无线(2.4G-x) 的勾 去掉，点击应用</p>
<p><img src="https://img.wangwen135.top:23456/image/2024/07/66a90fb54a422.png" alt="修改端口绑定.png"></p>
<h3 id="设置iptv的无线绑定"><a href="#设置iptv的无线绑定" class="headerlink" title="设置iptv的无线绑定"></a>设置iptv的无线绑定</h3><p><strong>网络 -&gt;  宽带设置</strong></p>
<p>选择 3_Other_B_VID_45<br>这个就是IPTV，将无线勾上，点击应用</p>
<p><img src="https://img.wangwen135.top:23456/image/2024/07/66a90feca15b6.png" alt="IPTV无线绑定.png"></p>
<h3 id="修改WLAN配置启动无线"><a href="#修改WLAN配置启动无线" class="headerlink" title="修改WLAN配置启动无线"></a>修改WLAN配置启动无线</h3><p>**网络 -&gt; WLAN配置 **  </p>
<p>SSID 使能的勾勾上<br><img src="https://img.wangwen135.top:23456/image/2024/07/66a910153323a.png" alt="SSID使能.png"></p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h3 id="机顶盒设置wifi连接"><a href="#机顶盒设置wifi连接" class="headerlink" title="机顶盒设置wifi连接"></a>机顶盒设置wifi连接</h3><p>打开电视 和 机顶盒，按遥控的设置，进入维护登陆界面<br>机顶盒维护初始密码： 6321</p>
<p>进入网络选择无线，填入密码就行了（不行就试试将连接方式换成PPPOE试试，忘了）</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/Spring/Spring-%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Spring/Spring-%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">Spring-介绍</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-22 23:41:00" itemprop="dateCreated datePublished" datetime="2020-07-22T23:41:00+08:00">2020-07-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>11 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><em>从这个地方随手翻译过来的</em><br><em><a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/spring/index.htm">https://www.tutorialspoint.com/spring/index.htm</a></em><br><em>王某某</em></p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Spring是企业Java最流行的应用程序开发框架。全球数以百万计的开发人员使用Spring Framework创建高性能，易于测试和可重用的代码。</p>
<p>Spring框架是一个开源的Java平台。它最初由Rod Johnson编写，并于2003年6月首次在Apache 2.0许可下发布。</p>
<p>Spring框架的核心功能可以用于开发任何Java应用程序，但是在Java EE平台之上还可以扩展构建Web应用程序。Spring框架的目标是通过启用基于POJO的编程模型来使J2EE开发更易于使用，并促进良好的编程实践。</p>
<h3 id="依赖注入（DI）"><a href="#依赖注入（DI）" class="headerlink" title="依赖注入（DI）"></a>依赖注入（DI）</h3><p>Spring最认常用技术是控制反转的依赖注入（DI）。该控制反转（IOC）是一个笼统的概念，它可以在许多不同的方式来表达。依赖注入仅仅是控制反转的一个具体例子。</p>
<h3 id="面向切面编程（AOP）"><a href="#面向切面编程（AOP）" class="headerlink" title="面向切面编程（AOP）"></a>面向切面编程（AOP）</h3><p>Spring的关键组件之一是面向切面编程（AOP）框架。跨越应用程序多个点的功能称为横切关注点，这些横切关注点在概念上与应用程序的业务逻辑分离。有各种常见的很好的例子，包括日志记录，声明式事务，安全性，缓存等等。</p>
<hr>
<h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><p>Spring框架提供了大约20个模块，可以根据应用需求使用。</p>
<h3 id="核心容器"><a href="#核心容器" class="headerlink" title="核心容器"></a>核心容器</h3><p>核心容器由Core，Beans，Context和Expression Language模块组成</p>
<ul>
<li>Core 提供了框架的基本部分，包括IOC和依赖注入特征。</li>
<li>Beans 提供的BeanFactory，是工厂模式的一个复杂实现。</li>
<li>Context 上下文模块构建在Core和Beans模块提供的基础之上，它是访问定义和配置的任何对象的媒介。ApplicationContext接口是上下文模块的焦点。</li>
<li>Expression Language SpEL模块提供了一种强大的表达式语言，用于在运行时查询和操作对象图。</li>
</ul>
<h3 id="数据访问-集成"><a href="#数据访问-集成" class="headerlink" title="数据访问&#x2F;集成"></a>数据访问&#x2F;集成</h3><p>数据访问&#x2F;集成层由JDBC，ORM，OXM，JMS和事务模块组成</p>
<ul>
<li>JDBC模块提供了JDBC抽象层，消除了对冗长的JDBC相关编码的需要。</li>
<li>ORM模块为流行的对象-关系映射api提供集成层，包括JPA、JDO、Hibernate和iBatis。</li>
<li>OXM模块提供了一个抽象层，支持JAXB、Castor、XMLBeans、JiBX和XStream的对象&#x2F;XML映射实现。</li>
<li>Java消息传递服务JMS模块包含用于生成和使用消息的功能。</li>
<li>事务模块支持实现特殊接口和所有pojo的类的编程和声明式事务管理。</li>
</ul>
<h3 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h3><p>Web层由Web，Web-MVC，Web-Socket和Web-Portlet模块组成</p>
<ul>
<li>Web模块提供面向Web的基本集成特性，如多部分文件上传功能，以及使用servlet侦听器和面向Web的应用程序上下文初始化IoC容器。 </li>
<li>Web-MVC模块包含用于web应用程序的Spring的模型-视图-控制器(MVC)实现。</li>
<li>Web-Socket模块支持web应用程序中的客户端和服务器之间的基于websocket的双向通信。</li>
<li>Web-Portlet模块提供了将在portlet环境中使用的MVC实现，并镜像了web servlet模块的功能。</li>
</ul>
<h3 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h3><p>重要模块像AOP，Aspects（切面），仪表，消息和测试模块等<br>…<br>…  </p>
<h2 id="Bean定义"><a href="#Bean定义" class="headerlink" title="Bean定义"></a>Bean定义</h2><p>构成应用程序主干和由Spring IoC容器管理的对象称为bean。bean是由Spring IoC容器实例化、组装和管理的对象。这些bean是用你提供给容器的配置元数据创建的。例如，XML <bean/>定义的形式</p>
<p>配置一个bean容器需要知道如下信息：</p>
<ul>
<li>如何创建一个bean</li>
<li>Bean的生命周期细节</li>
<li>Bean的依赖关系</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>class</td>
<td>该属性是强制性的，指定了用于创建bean的类。</td>
</tr>
<tr>
<td>name</td>
<td>该属性唯一的指定了bean标识符。在基于XML的配置元数据中，使用id （and&#x2F;or）name属性来指定bean标识符。</td>
</tr>
<tr>
<td>scope</td>
<td>指定了从特定的bean定义创建的对象的范围</td>
</tr>
<tr>
<td>constructor-arg</td>
<td>构造参数，用于注入依赖关系</td>
</tr>
<tr>
<td>properties</td>
<td>属性，用于注入依赖关系</td>
</tr>
<tr>
<td>autowiring mode</td>
<td>自动装配模式，用于注入依赖关系</td>
</tr>
<tr>
<td>lazy-initialization mode</td>
<td>延时加载,告诉IoC容器在第一次请求时创建一个bean实例，而不是在启动时</td>
</tr>
<tr>
<td>initialization method</td>
<td>初始化方法，在bean的所有必要属性设置之后立即调用的回调方面</td>
</tr>
<tr>
<td>destruction method</td>
<td>销毁方法，在bean的容器被销毁时要调用的回调函数</td>
</tr>
</tbody></table>
<h3 id="Spring-配置"><a href="#Spring-配置" class="headerlink" title="Spring 配置"></a>Spring 配置</h3><p>配置Spring一般包括3中方式</p>
<ul>
<li>基于XML的配置文件</li>
<li>基于注解的配置</li>
<li>基于Java的配置</li>
</ul>
<p>基于XML的配置文件示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- A simple bean definition --&gt;</span><br><span class="line">   &lt;bean id = &quot;...&quot; class = &quot;...&quot;&gt;</span><br><span class="line">      &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- A bean definition with lazy init set on --&gt;</span><br><span class="line">   &lt;bean id = &quot;...&quot; class = &quot;...&quot; lazy-init = &quot;true&quot;&gt;</span><br><span class="line">      &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- A bean definition with initialization method --&gt;</span><br><span class="line">   &lt;bean id = &quot;...&quot; class = &quot;...&quot; init-method = &quot;...&quot;&gt;</span><br><span class="line">      &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- A bean definition with destruction method --&gt;</span><br><span class="line">   &lt;bean id = &quot;...&quot; class = &quot;...&quot; destroy-method = &quot;...&quot;&gt;</span><br><span class="line">      &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- more bean definitions go here --&gt;</span><br><span class="line">   </span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Bean的范围"><a href="#Bean的范围" class="headerlink" title="Bean的范围"></a>Bean的范围</h2><p>定义一个<bean>时，你可以选择为该bean声明一个范围。例如，为了强制Spring在每次需要时产生一个新的bean实例，你应该声明bean的scope属性是<strong>prototype</strong>。同样，如果你希望Spring在每次需要时都返回相同的bean实例，你应该声明bean的scope属性为<strong>singleton</strong>。</p>
<p>Spring框架支持以下五个范围，其中三个仅在您使用Web感知的ApplicationContext时才可用。</p>
<table>
<thead>
<tr>
<th>范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>singleton</td>
<td>单实例，每次都使用同一个bean（默认值），对象创建好之后会被缓存，</td>
</tr>
<tr>
<td>prototype</td>
<td>多实例，每次都返回新的实例</td>
</tr>
<tr>
<td>request</td>
<td>在一次HTTP请求中使用相同实例。<br>只有在Web感知的Spring ApplicationContext的上下文中才有效。</td>
</tr>
<tr>
<td>session</td>
<td>在一个HTTP会话中使用相同实例。<br>只有在Web感知的Spring ApplicationContext的上下文中才有效。</td>
</tr>
<tr>
<td>global-session</td>
<td>在一个全局HTTP会话中使用相同实例。<br>只有在Web感知的Spring ApplicationContext的上下文中才有效。</td>
</tr>
</tbody></table>
<h2 id="Bean的生命周期"><a href="#Bean的生命周期" class="headerlink" title="Bean的生命周期"></a>Bean的生命周期</h2><h3 id="初始化回调"><a href="#初始化回调" class="headerlink" title="初始化回调"></a>初始化回调</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class ExampleBean implements InitializingBean &#123;</span><br><span class="line">   public void afterPropertiesSet() &#123;</span><br><span class="line">      // do some initialization work</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于基于XML的配置元数据，可以使用init-method属性来指定具有void无参数签名的方法的名称。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id = &quot;exampleBean&quot; class = &quot;examples.ExampleBean&quot; init-method = &quot;init&quot;/&gt;</span><br><span class="line"></span><br><span class="line">public class ExampleBean &#123;</span><br><span class="line">   public void init() &#123;</span><br><span class="line">      // do some initialization work</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="销毁回调"><a href="#销毁回调" class="headerlink" title="销毁回调"></a>销毁回调</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class ExampleBean implements DisposableBean &#123;</span><br><span class="line">   public void destroy() &#123;</span><br><span class="line">      // do some destruction work</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于基于XML的配置元数据，可以使用destroy-method属性来指定具有void无参数签名的方法的名称。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id = &quot;exampleBean&quot; class = &quot;examples.ExampleBean&quot; destroy-method = &quot;destroy&quot;/&gt;</span><br><span class="line"></span><br><span class="line">public class ExampleBean &#123;</span><br><span class="line">   public void destroy() &#123;</span><br><span class="line">      // do some destruction work</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="默认初始化和销毁方法"><a href="#默认初始化和销毁方法" class="headerlink" title="默认初始化和销毁方法"></a>默认初始化和销毁方法</h3><p>如果你的bean有太多具有相同名称的初始化和&#x2F;或销毁方法，则不需要在每个单独的bean上声明init-method和destroy-method。这种情况可以使用<beans>元素上的default-init-method和default-destroy-method属性来配置，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span><br><span class="line">   default-init-method = &quot;init&quot; </span><br><span class="line">   default-destroy-method = &quot;destroy&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;bean id = &quot;...&quot; class = &quot;...&quot;&gt;</span><br><span class="line">      &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">   </span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Bean-Post-Processors"><a href="#Bean-Post-Processors" class="headerlink" title="Bean Post Processors"></a>Bean Post Processors</h2><p>BeanPostProcessor接口定义了回调方法，你可以实现这些方法来提供您自己的实例化逻辑、依赖解析逻辑等。还可以在Spring容器完成实例化、配置和初始化bean之后，通过插入一个或多个BeanPostProcessor实现来实现一些自定义逻辑。<br>可以配置多个BeanPostProcessor接口，并且您可以通过设置order属性来控制这些BeanPostProcessor接口执行的顺序。</p>
<p>ApplicationContext自动检测由BeanPostProcessor接口实现定义的任何bean，并将这些bean注册为postprocessor，然后容器在创建bean时相应地调用这些bean。</p>
<p>HelloWorld.java文件的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package com.tutorialspoint;</span><br><span class="line"></span><br><span class="line">public class HelloWorld &#123;</span><br><span class="line">   private String message;</span><br><span class="line"></span><br><span class="line">   public void setMessage(String message)&#123;</span><br><span class="line">      this.message  = message;</span><br><span class="line">   &#125;</span><br><span class="line">   public void getMessage()&#123;</span><br><span class="line">      System.out.println(&quot;Your Message : &quot; + message);</span><br><span class="line">   &#125;</span><br><span class="line">   public void init()&#123;</span><br><span class="line">      System.out.println(&quot;Bean is going through init.&quot;);</span><br><span class="line">   &#125;</span><br><span class="line">   public void destroy()&#123;</span><br><span class="line">      System.out.println(&quot;Bean will destroy now.&quot;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>InitHelloWorld.java文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package com.tutorialspoint;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.config.BeanPostProcessor;</span><br><span class="line">import org.springframework.beans.BeansException;</span><br><span class="line"></span><br><span class="line">public class InitHelloWorld implements BeanPostProcessor &#123;</span><br><span class="line">   public Object postProcessBeforeInitialization(Object bean, String beanName) </span><br><span class="line">      throws BeansException &#123;</span><br><span class="line">      </span><br><span class="line">      System.out.println(&quot;BeforeInitialization : &quot; + beanName);</span><br><span class="line">      return bean;  // you can return any other object as well</span><br><span class="line">   &#125;</span><br><span class="line">   public Object postProcessAfterInitialization(Object bean, String beanName) </span><br><span class="line">      throws BeansException &#123;</span><br><span class="line">      </span><br><span class="line">      System.out.println(&quot;AfterInitialization : &quot; + beanName);</span><br><span class="line">      return bean;  // you can return any other object as well</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Beans.xml 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;bean id = &quot;helloWorld&quot; class = &quot;com.tutorialspoint.HelloWorld&quot;</span><br><span class="line">      init-method = &quot;init&quot; destroy-method = &quot;destroy&quot;&gt;</span><br><span class="line">      &lt;property name = &quot;message&quot; value = &quot;Hello World!&quot;/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;bean class = &quot;com.tutorialspoint.InitHelloWorld&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<p>MainApp.java文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.tutorialspoint;</span><br><span class="line"></span><br><span class="line">import org.springframework.context.support.AbstractApplicationContext;</span><br><span class="line">import org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line">public class MainApp &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">      AbstractApplicationContext context = new ClassPathXmlApplicationContext(&quot;Beans.xml&quot;);</span><br><span class="line"></span><br><span class="line">      HelloWorld obj = (HelloWorld) context.getBean(&quot;helloWorld&quot;);</span><br><span class="line">      obj.getMessage();</span><br><span class="line">      context.registerShutdownHook();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BeforeInitialization : helloWorld</span><br><span class="line">Bean is going through init.</span><br><span class="line">AfterInitialization : helloWorld</span><br><span class="line">Your Message : Hello World!</span><br><span class="line">Bean will destroy now.</span><br></pre></td></tr></table></figure>

<h2 id="Bean定义继承"><a href="#Bean定义继承" class="headerlink" title="Bean定义继承"></a>Bean定义继承</h2><p>bean定义可以包含许多配置信息，包括构造函数参数、属性值和容器特定的信息，如初始化方法、静态工厂方法名称等。</p>
<p>子bean定义从父定义继承配置数据。子定义可以覆盖一些值，或者根据需要添加其他值。<br>Spring Bean定义继承与Java类继承没有关系，但是继承概念是相同的。可以将父bean定义定义定义为模板，其他子bean可以从父bean继承所需的配置。</p>
<p>当使用基于xml的配置元数据时，您通过使用父属性指定子bean定义，指定父bean作为该属性的值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;bean id = &quot;helloWorld&quot; class = &quot;com.tutorialspoint.HelloWorld&quot;&gt;</span><br><span class="line">      &lt;property name = &quot;message1&quot; value = &quot;Hello World!&quot;/&gt;</span><br><span class="line">      &lt;property name = &quot;message2&quot; value = &quot;Hello Second World!&quot;/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;bean id =&quot; helloIndia&quot; class = &quot;com.tutorialspoint.HelloIndia&quot; parent = &quot;helloWorld&quot;&gt;</span><br><span class="line">      &lt;property name = &quot;message1&quot; value = &quot;Hello India!&quot;/&gt;</span><br><span class="line">      &lt;property name = &quot;message3&quot; value = &quot;Namaste India!&quot;/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h3 id="定义模板"><a href="#定义模板" class="headerlink" title="定义模板"></a>定义模板</h3><p>定义Bean定义模板时，不应指定类属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;bean id = &quot;beanTeamplate&quot; abstract = &quot;true&quot;&gt;</span><br><span class="line">      &lt;property name = &quot;message1&quot; value = &quot;Hello World!&quot;/&gt;</span><br><span class="line">      &lt;property name = &quot;message2&quot; value = &quot;Hello Second World!&quot;/&gt;</span><br><span class="line">      &lt;property name = &quot;message3&quot; value = &quot;Namaste India!&quot;/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;bean id = &quot;helloIndia&quot; class = &quot;com.tutorialspoint.HelloIndia&quot; parent = &quot;beanTeamplate&quot;&gt;</span><br><span class="line">      &lt;property name = &quot;message1&quot; value = &quot;Hello India!&quot;/&gt;</span><br><span class="line">      &lt;property name = &quot;message3&quot; value = &quot;Namaste India!&quot;/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">   </span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p>父bean不能自行实例化，因为它是不完整的，并且它也明确标记为抽象。当定义像这样抽象时，它只能用作纯模板bean定义，作为子定义的父定义。</p>
<h2 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h2><p>依赖注入主要包括基于构造函数的依赖注入和基于Setter的依赖注入  </p>
<p>基于setter的注入但使用内部bean的配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- Definition for textEditor bean using inner bean --&gt;</span><br><span class="line">   &lt;bean id = &quot;textEditor&quot; class = &quot;com.tutorialspoint.TextEditor&quot;&gt;</span><br><span class="line">      &lt;property name = &quot;spellChecker&quot;&gt;</span><br><span class="line">         &lt;bean id = &quot;spellChecker&quot; class = &quot;com.tutorialspoint.SpellChecker&quot;/&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h3 id="注入集合"><a href="#注入集合" class="headerlink" title="注入集合"></a>注入集合</h3><p>包括list、set、map、props</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- Definition for javaCollection --&gt;</span><br><span class="line">   &lt;bean id = &quot;javaCollection&quot; class = &quot;com.tutorialspoint.JavaCollection&quot;&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;!-- results in a setAddressList(java.util.List) call --&gt;</span><br><span class="line">      &lt;property name = &quot;addressList&quot;&gt;</span><br><span class="line">         &lt;list&gt;</span><br><span class="line">            &lt;value&gt;INDIA&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;Pakistan&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;USA&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;USA&lt;/value&gt;</span><br><span class="line">         &lt;/list&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- results in a setAddressSet(java.util.Set) call --&gt;</span><br><span class="line">      &lt;property name = &quot;addressSet&quot;&gt;</span><br><span class="line">         &lt;set&gt;</span><br><span class="line">            &lt;value&gt;INDIA&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;Pakistan&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;USA&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;USA&lt;/value&gt;</span><br><span class="line">         &lt;/set&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- results in a setAddressMap(java.util.Map) call --&gt;</span><br><span class="line">      &lt;property name = &quot;addressMap&quot;&gt;</span><br><span class="line">         &lt;map&gt;</span><br><span class="line">            &lt;entry key = &quot;1&quot; value = &quot;INDIA&quot;/&gt;</span><br><span class="line">            &lt;entry key = &quot;2&quot; value = &quot;Pakistan&quot;/&gt;</span><br><span class="line">            &lt;entry key = &quot;3&quot; value = &quot;USA&quot;/&gt;</span><br><span class="line">            &lt;entry key = &quot;4&quot; value = &quot;USA&quot;/&gt;</span><br><span class="line">         &lt;/map&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;!-- results in a setAddressProp(java.util.Properties) call --&gt;</span><br><span class="line">      &lt;property name = &quot;addressProp&quot;&gt;</span><br><span class="line">         &lt;props&gt;</span><br><span class="line">            &lt;prop key = &quot;one&quot;&gt;INDIA&lt;/prop&gt;</span><br><span class="line">            &lt;prop key = &quot;one&quot;&gt;INDIA&lt;/prop&gt;</span><br><span class="line">            &lt;prop key = &quot;two&quot;&gt;Pakistan&lt;/prop&gt;</span><br><span class="line">            &lt;prop key = &quot;three&quot;&gt;USA&lt;/prop&gt;</span><br><span class="line">            &lt;prop key = &quot;four&quot;&gt;USA&lt;/prop&gt;</span><br><span class="line">         &lt;/props&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p>将bean引用注入为集合元素中，使引用和值混合在一起</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- Bean Definition to handle references and values --&gt;</span><br><span class="line">   &lt;bean id = &quot;...&quot; class = &quot;...&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- Passing bean reference  for java.util.List --&gt;</span><br><span class="line">      &lt;property name = &quot;addressList&quot;&gt;</span><br><span class="line">         &lt;list&gt;</span><br><span class="line">            &lt;ref bean = &quot;address1&quot;/&gt;</span><br><span class="line">            &lt;ref bean = &quot;address2&quot;/&gt;</span><br><span class="line">            &lt;value&gt;Pakistan&lt;/value&gt;</span><br><span class="line">         &lt;/list&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;!-- Passing bean reference  for java.util.Set --&gt;</span><br><span class="line">      &lt;property name = &quot;addressSet&quot;&gt;</span><br><span class="line">         &lt;set&gt;</span><br><span class="line">            &lt;ref bean = &quot;address1&quot;/&gt;</span><br><span class="line">            &lt;ref bean = &quot;address2&quot;/&gt;</span><br><span class="line">            &lt;value&gt;Pakistan&lt;/value&gt;</span><br><span class="line">         &lt;/set&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;!-- Passing bean reference  for java.util.Map --&gt;</span><br><span class="line">      &lt;property name = &quot;addressMap&quot;&gt;</span><br><span class="line">         &lt;map&gt;</span><br><span class="line">            &lt;entry key = &quot;one&quot; value = &quot;INDIA&quot;/&gt;</span><br><span class="line">            &lt;entry key = &quot;two&quot; value-ref = &quot;address1&quot;/&gt;</span><br><span class="line">            &lt;entry key = &quot;three&quot; value-ref = &quot;address2&quot;/&gt;</span><br><span class="line">         &lt;/map&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p>要使用上面的bean定义，你需要定义你的setter方法，以便它们也能够处理引用。</p>
<h3 id="注入空和空字符串值"><a href="#注入空和空字符串值" class="headerlink" title="注入空和空字符串值"></a>注入空和空字符串值</h3><p>空字符串作为值:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id = &quot;...&quot; class = &quot;exampleBean&quot;&gt;</span><br><span class="line">   &lt;property name = &quot;email&quot; value = &quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>传递一个NULL值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id = &quot;...&quot; class = &quot;exampleBean&quot;&gt;</span><br><span class="line">   &lt;property name = &quot;email&quot;&gt;&lt;null/&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>等同于：exampleBean.setEmail(null)</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">王某某</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">138k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">8:20</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  






  





</body>
</html>
