<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"wangwen135.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
<meta property="og:type" content="website">
<meta property="og:title" content="王某某的笔记">
<meta property="og:url" content="https://wangwen135.github.io/page/11/index.html">
<meta property="og:site_name" content="王某某的笔记">
<meta property="og:description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="王某某">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://wangwen135.github.io/page/11/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/11/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>王某某的笔记</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">王某某的笔记</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录我的编程之路</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="王某某"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">王某某</p>
  <div class="site-description" itemprop="description">这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">158</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">121</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/wangwen135" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wangwen135" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianshu.com/u/66c41e72644b" title="简  书 → https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;66c41e72644b" rel="noopener me" target="_blank"><i class="fa fa-link fa-fw"></i>简  书</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wangwen135@gmail.com" title="E-Mail → mailto:wangwen135@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/wangwen135" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;wangwen135" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/MySQL/CentOS-7-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEMySQL-5-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/MySQL/CentOS-7-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEMySQL-5-6/" class="post-title-link" itemprop="url">CentOS-7-安装配置MySQL-5-6</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-07 23:41:00" itemprop="dateCreated datePublished" datetime="2019-08-07T23:41:00+08:00">2019-08-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>365</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><em>2017年11月</em></p>
<hr>
<p>CentOS7的yum源中默认好像是没有mysql的。为了解决这个问题，我们要先下载mysql的repo源。</p>
<p><strong>MySQL Yum Repository</strong><br><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/repo/yum/">https://dev.mysql.com/downloads/repo/yum/</a></p>
<h3 id="1-下载mysql的repo源"><a href="#1-下载mysql的repo源" class="headerlink" title="1. 下载mysql的repo源"></a>1. 下载mysql的repo源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm</span><br></pre></td></tr></table></figure>

<h3 id="2-安装mysql-community-release-el7-5-noarch-rpm包"><a href="#2-安装mysql-community-release-el7-5-noarch-rpm包" class="headerlink" title="2. 安装mysql-community-release-el7-5.noarch.rpm包"></a>2. 安装mysql-community-release-el7-5.noarch.rpm包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh mysql-community-release-el7-5.noarch.rpm</span><br></pre></td></tr></table></figure>
<p>安装这个包后，会获得两个mysql的yum repo源：  </p>
<blockquote>
<p>&#x2F;etc&#x2F;yum.repos.d&#x2F;mysql-community.repo<br>&#x2F;etc&#x2F;yum.repos.d&#x2F;mysql-community-source.repo  </p>
</blockquote>
<h3 id="3-安装mysql"><a href="#3-安装mysql" class="headerlink" title="3. 安装mysql"></a>3. 安装mysql</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install mysql-server</span><br></pre></td></tr></table></figure>
<p>根据步骤安装就可以了，不过安装完成后，没有密码，需要重置密码。</p>
<h3 id="4-启动"><a href="#4-启动" class="headerlink" title="4. 启动"></a>4. 启动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure>

<h3 id="5-重置密码"><a href="#5-重置密码" class="headerlink" title="5. 重置密码"></a>5. 重置密码</h3><p>重置密码前，首先要登录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root</span><br></pre></td></tr></table></figure>
<p>登录时有可能报这样的错：<br>ERROR 2002 (HY000): Can‘t connect to local MySQL server through socket ‘&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock‘<br>原因是&#x2F;var&#x2F;lib&#x2F;mysql的访问权限问题。下面的命令把&#x2F;var&#x2F;lib&#x2F;mysql的拥有者改为当前用户：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R openscanner:openscanner /var/lib/mysql</span><br></pre></td></tr></table></figure>
<p>然后，重启服务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure>
<p>接下来登录重置密码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root</span><br><span class="line">mysql &gt; use mysql;</span><br><span class="line">mysql &gt; update user set password=password(&#x27;root&#x27;) where user=&#x27;root&#x27;;</span><br><span class="line">mysql &gt; exit;</span><br></pre></td></tr></table></figure>

<p>设置Mysql远程访问</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;root&#x27; with grant option;</span><br></pre></td></tr></table></figure>
<p>使授权生效</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h3 id="6-开放3306端口"><a href="#6-开放3306端口" class="headerlink" title="6. 开放3306端口"></a>6. 开放3306端口</h3><p><strong>CentOS 7  默认已经不适用这个防火墙了！</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure>
<p>添加以下内容：</p>
<blockquote>
<p>-A INPUT -p tcp -m state –state NEW -m tcp –dport 3306 -j ACCEPT</p>
</blockquote>
<p>保存后重启防火墙：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service iptables restart</span><br></pre></td></tr></table></figure>


<h3 id="7-设置开机启动"><a href="#7-设置开机启动" class="headerlink" title="7. 设置开机启动"></a>7. 设置开机启动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list</span><br><span class="line"></span><br><span class="line">systemctl status mysqld</span><br><span class="line"></span><br><span class="line">systemctl is-enabled mysqld</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/java/java%E7%A8%8B%E5%BA%8FClassLoad%E5%8A%A0%E5%AF%86%E7%9A%84%E9%80%9A%E7%94%A8%E7%A0%B4%E8%A7%A3%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java/java%E7%A8%8B%E5%BA%8FClassLoad%E5%8A%A0%E5%AF%86%E7%9A%84%E9%80%9A%E7%94%A8%E7%A0%B4%E8%A7%A3%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">java程序ClassLoad加密的通用破解方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-15 12:01:00" itemprop="dateCreated datePublished" datetime="2019-05-15T12:01:00+08:00">2019-05-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>743</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>想要加密java程序是比较困难的，一般的做法就是代码混淆，增加代码阅读的难度，另外就是修改Class文件的字节码，然后再虚拟机加载类的时候进行解密。修改字节码的解密方法一般是修改JDK中的ClassLoad或者自定义一个ClassLoad来解密Class。有些为了不让别人看到解密算法有些还会用C来写解密程序，再用jni来调用。</p>
<p>一般用改ClassLoader来加密的这种方法都可以用 javaagent 获取到解密后class。</p>
<blockquote>
<p>使用 Instrumentation，开发者可以构建一个独立于应用程序的代理程序（Agent），用来监测和协助运行在 JVM 上的程序，甚至能够替换和修改某些类的定义。有了这样的功能，开发者就可以实现更为灵活的运行时虚拟机监控和 Java 类操作了，这样的特性实际上提供了一种虚拟机级别支持的 AOP 实现方式，使得开发者无需对 JDK 做任何升级和改动，就可以实现某些 AOP 的功能了。<br><em>介绍地址：</em><br><a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/java/j-lo-jse61/">https://www.ibm.com/developerworks/cn/java/j-lo-jse61/</a></p>
</blockquote>
<h3 id="输出Class文件到指定目录的代码"><a href="#输出Class文件到指定目录的代码" class="headerlink" title="输出Class文件到指定目录的代码"></a>输出Class文件到指定目录的代码</h3><h4 id="1、新建一个maven项目"><a href="#1、新建一个maven项目" class="headerlink" title="1、新建一个maven项目"></a>1、新建一个maven项目</h4><p>如：class-agent</p>
<h4 id="2、写两个类"><a href="#2、写两个类" class="headerlink" title="2、写两个类"></a>2、写两个类</h4><p><strong>PreMainExecutor.java</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.wwh.agent;</span><br><span class="line"></span><br><span class="line">import java.lang.instrument.Instrumentation;</span><br><span class="line"></span><br><span class="line">public class PreMainExecutor &#123;</span><br><span class="line"></span><br><span class="line">    public static void premain(String agentOps, Instrumentation inst) &#123;</span><br><span class="line">        System.out.println(&quot;premain execute..........&quot;);</span><br><span class="line">        System.out.println(&quot;参数：&quot; + agentOps);</span><br><span class="line">        // 添加Transformer</span><br><span class="line">        inst.addTransformer(new PrintClassFileAgent(agentOps));</span><br><span class="line"></span><br><span class="line">        // 可以用这个来加载jar包</span><br><span class="line">        // inst.appendToSystemClassLoaderSearch(jarfile);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>PrintClassFileAgent.java</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">package com.wwh.agent;</span><br><span class="line"></span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.lang.instrument.ClassFileTransformer;</span><br><span class="line">import java.lang.instrument.IllegalClassFormatException;</span><br><span class="line">import java.security.ProtectionDomain;</span><br><span class="line"></span><br><span class="line">public class PrintClassFileAgent implements ClassFileTransformer &#123;</span><br><span class="line"></span><br><span class="line">    public static final String OUT_FILE_DIR = &quot;/opt/logs/wwh/classFile/&quot;;</span><br><span class="line"></span><br><span class="line">    private File outFileDir;</span><br><span class="line"></span><br><span class="line">    public PrintClassFileAgent()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public PrintClassFileAgent(String fileDir)&#123;</span><br><span class="line">        String fileOutDir = OUT_FILE_DIR;</span><br><span class="line">        if (fileDir != null &amp;&amp; !&quot;&quot;.equals(fileDir)) &#123;</span><br><span class="line">            fileOutDir = fileDir;</span><br><span class="line">        &#125;</span><br><span class="line">        outFileDir = new File(fileOutDir);</span><br><span class="line">        outFileDir.mkdirs();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined,</span><br><span class="line">                            ProtectionDomain protectionDomain,</span><br><span class="line">                            byte[] classfileBuffer) throws IllegalClassFormatException &#123;</span><br><span class="line">        System.out.println(&quot;类加载器：&quot; + loader);</span><br><span class="line">        System.out.println(&quot;类名称：&quot; + className);</span><br><span class="line"></span><br><span class="line">        String pathName = className.replaceAll(&quot;[.]&quot;, &quot;/&quot;);</span><br><span class="line">        pathName = pathName + &quot;.class&quot;;</span><br><span class="line"></span><br><span class="line">        File f = new File(OUT_FILE_DIR + pathName);</span><br><span class="line"></span><br><span class="line">        f.getParentFile().mkdirs();</span><br><span class="line">        try &#123;</span><br><span class="line">            f.createNewFile();</span><br><span class="line">            FileOutputStream fos = new FileOutputStream(f);</span><br><span class="line">            fos.write(classfileBuffer);</span><br><span class="line">            fos.close();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="3、-修改pom文件"><a href="#3、-修改pom文件" class="headerlink" title="3、 修改pom文件"></a>3、 修改pom文件</h4><p>用于指定：Premain-Class</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">	&lt;groupId&gt;com.wwh.agent&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;class-agent&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">	&lt;properties&gt;</span><br><span class="line">		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</span><br><span class="line">		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;</span><br><span class="line">	&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">	&lt;build&gt;</span><br><span class="line">		&lt;plugins&gt;</span><br><span class="line">			&lt;plugin&gt;</span><br><span class="line">				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">				&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;</span><br><span class="line">				&lt;configuration&gt;</span><br><span class="line">					&lt;archive&gt;</span><br><span class="line">						&lt;manifest&gt;</span><br><span class="line">							&lt;addClasspath&gt;true&lt;/addClasspath&gt;</span><br><span class="line">						&lt;/manifest&gt;</span><br><span class="line">						&lt;manifestEntries&gt;</span><br><span class="line">							&lt;Premain-Class&gt;</span><br><span class="line">								com.wwh.agent.PreMainExecutor</span><br><span class="line">							&lt;/Premain-Class&gt;</span><br><span class="line">						&lt;/manifestEntries&gt;</span><br><span class="line">					&lt;/archive&gt;</span><br><span class="line">				&lt;/configuration&gt;</span><br><span class="line">			&lt;/plugin&gt;</span><br><span class="line">		&lt;/plugins&gt;</span><br><span class="line">	&lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>

<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>将上面的maven项目编译打包，将 class-agent-0.0.1-SNAPSHOT.jar 复制到目标位置。</p>
<p>用如下命令启动想要破解的程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java -javaagent:class-agent-0.0.1-SNAPSHOT.jar -cp runner-0.0.1-SNAPSHOT.jar com.wwh.runner.EmptyRunner</span><br><span class="line"></span><br><span class="line">//指定输出Class文件目录的</span><br><span class="line">java -javaagent:class-agent-0.0.1-SNAPSHOT.jar=/opt/xxx/out -cp runner-0.0.1-SNAPSHOT.jar com.wwh.runner.EmptyRunner</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果需要破解的程序本身就有使用javaagent，需要将上面的agent放到调用链的最后面。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -javaagent:agentA.jar -javaagent:class-agent-0.0.1-SNAPSHOT.jar XXProgram</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p>将在目录下保存所有加载的类的class文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">E:\opt\logs\wwh\classFile&gt;tree</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">    ├─nio</span><br><span class="line">    │  ├─ch</span><br><span class="line">    │  ├─cs</span><br><span class="line">    │  └─fs</span><br><span class="line">    ├─reflect</span><br><span class="line">    │  ├─annotation</span><br><span class="line">    │  └─generics</span><br><span class="line">    │      ├─factory</span><br><span class="line">    │      ├─parser</span><br><span class="line">    │      ├─reflectiveObjects</span><br><span class="line">    │      ├─repository</span><br><span class="line">    │      ├─scope</span><br><span class="line">    │      ├─tree</span><br><span class="line">    │      └─visitor</span><br><span class="line">    ├─security</span><br><span class="line">    │  ├─action</span><br><span class="line">    │  ├─jca</span><br><span class="line">    │  ├─provider</span><br><span class="line">    │  └─util</span><br><span class="line">    ├─text</span><br><span class="line">    │  └─resources</span><br><span class="line">    │      └─zh</span><br><span class="line">    ├─usagetracker</span><br><span class="line">    └─util</span><br><span class="line">        ├─calendar</span><br><span class="line">        ├─locale</span><br><span class="line">        │  └─provider</span><br><span class="line">        ├─logging</span><br><span class="line">        ├─resources</span><br><span class="line">        │  ├─en</span><br><span class="line">        │  └─zh</span><br><span class="line">        └─spi</span><br><span class="line">......        </span><br><span class="line">......</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/java/%E5%85%B3%E4%BA%8E%20java%20Agent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java/%E5%85%B3%E4%BA%8E%20java%20Agent/" class="post-title-link" itemprop="url">关于 java Agent</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-15 12:01:00" itemprop="dateCreated datePublished" datetime="2019-05-15T12:01:00+08:00">2019-05-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>10 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><strong>instrument 规范</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/package-summary.html?is-external=true">https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/package-summary.html?is-external=true</a></p>
</blockquote>
<p><strong>Class VirtualMachine</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/jdk/api/attach/spec/com/sun/tools/attach/VirtualMachine.html#loadAgent-java.lang.String-">https://docs.oracle.com/javase/8/docs/jdk/api/attach/spec/com/sun/tools/attach/VirtualMachine.html#loadAgent-java.lang.String-</a></p>
</blockquote>
<p><strong>Interface ClassFileTransformer</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/ClassFileTransformer.html">https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/ClassFileTransformer.html</a></p>
</blockquote>
<hr>
<h3 id="java-agent-实现"><a href="#java-agent-实现" class="headerlink" title="java agent 实现"></a>java agent 实现</h3><p>代理需要编译成jar包的方式来运行，JAR文件manifest中的属性指定将加载哪个代理类来启动代理。</p>
<p>有下面两种方式可以启动一个agent</p>
<h4 id="一：命令行接口"><a href="#一：命令行接口" class="headerlink" title="一：命令行接口"></a>一：命令行接口</h4><p>程序没有启动时可以通过在命令行上指定javaagent的方式来启动代理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-javaagent:jarpath[=options]</span><br><span class="line"></span><br><span class="line">#如：</span><br><span class="line">java -javaagent:xxx-agent.jar -cp xxx.jar com.wwh.xxxx</span><br></pre></td></tr></table></figure>

<p>通过命令行的方式可以指定<strong>多个</strong>代理，并且支持参数。初始化Java虚拟机(JVM)之后，将按照指定代理的顺序调用每个premain方法，然后调用真正的应用程序main方法。每个premain方法必须返回，以便继续启动程序。</p>
<p>agent Jar包中的manifest文件必须包含Premain-Class， 指向代理的入口类，这个类中包含了一个公共静态的premain方法</p>
<p>premain 方法有两种签名，虚拟机会尝试先运行下面这个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static void premain(String agentArgs, Instrumentation inst);</span><br></pre></td></tr></table></figure>
<p>如果没有会尝试调用下面这个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static void premain(String agentArgs);</span><br></pre></td></tr></table></figure>
<p>当使用命令行选项启动代理时，不会调用agentmain方法。</p>
<p>代理类将由系统类加载器加载(参见ClassLoader.getSystemClassLoader)。这是类加载器，它通常加载包含应用程序主方法的类。premain方法将在与应用程序main方法相同的安全性和类加载器规则下运行。对于代理premain方法可以做什么，没有建模限制。application main可以做的任何事情，包括创建线程，都是合法的。</p>
<p>每个代理都通过agentArgs参数传递其代理选项。代理选项作为单个字符串传递，任何额外的解析都应该由代理本身执行。</p>
<h4 id="二：在虚拟机启动之后再启动代理"><a href="#二：在虚拟机启动之后再启动代理" class="headerlink" title="二：在虚拟机启动之后再启动代理"></a>二：在虚拟机启动之后再启动代理</h4><p>程序已经启动后可以通过VirtualMachine 来加载启动代理，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VirtualMachine vm = VirtualMachine.attach(&quot;2177&quot;);</span><br><span class="line">vm.loadAgent(jar);</span><br><span class="line">vm.detach();</span><br></pre></td></tr></table></figure>

<p>注意：  </p>
<ol>
<li>代理JAR的manifest中必须包含属性 Agent-Class。此属性的值是代理类的名称。  </li>
<li>代理类必须实现一个公共静态的 agentmain  方法，如下所示。</li>
</ol>
<p>启动代理时先尝试运行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static void agentmain(String agentArgs, Instrumentation inst);</span><br></pre></td></tr></table></figure>
<p>找不到再尝试运行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static void agentmain(String agentArgs);</span><br></pre></td></tr></table></figure>

<p>agentmain方法不能阻塞，这个类同用可以拥有 premain  方法，不过并不会被调用</p>
<p>参数通过如下方式指定：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.loadAgent(jar, options);</span><br></pre></td></tr></table></figure>


<h4 id="Manifest-属性说明"><a href="#Manifest-属性说明" class="headerlink" title="Manifest 属性说明"></a>Manifest 属性说明</h4><p>代理JAR文件定义了以下清单属性:</p>
<ol>
<li><strong>Premain-Class</strong>  此属性指定代理类，也就是包含premain方法的类。如果该属性不存在，JVM将中止。注意这是一个类名，而不是文件名或路径。</li>
<li><strong>Agent-Class</strong>  指定代理类，支持在VM启动后启动代理的机制，包含了agentmain 方法的类，如果该属性不存在，则代理将不会启动。注意这是一个类名，而不是文件名或路径。</li>
<li><strong>Boot-Class-Path</strong> 引导类装入器要搜索的路径列表</li>
<li><strong>Can-Redefine-Classes</strong> 布尔值( true 或 false ，不区分大小写)。代理是否可以重新定义类。此属性是可选的，默认为false。</li>
<li><strong>Can-Retransform-Classes</strong> 布尔值( true 或 false ，不区分大小写)。代理是否可以重新转换类。此属性是可选的，默认为false。</li>
<li><strong>Can-Set-Native-Method-Prefix</strong> 布尔值( true 或 false ，不区分大小写)。代理是否可以设置本地方法前缀。此属性是可选的，默认为false。</li>
</ol>
<p>代理JAR文件可同时具有清单中的Premain-Class和Agent-Class属性。当使用-javaagent选项在命令行上启动代理时，执行Premain-Class属性指定的<br>代理类，而Agent-Class属性将被忽略。类似地，如果代理在VM启动之后再启动，则执行Agent-Class属性指定的代理类，而忽略Premain-Class属性的值。</p>
<hr>
<h3 id="相关类说明"><a href="#相关类说明" class="headerlink" title="相关类说明"></a>相关类说明</h3><p>几个关键类和接口</p>
<h4 id="VirtualMachine"><a href="#VirtualMachine" class="headerlink" title="VirtualMachine"></a>VirtualMachine</h4><p>表示一个java虚拟机<br>VirtualMachine表示已附加到的Java虚拟机。它所附加的Java虚拟机有时称为目标虚拟机或目标VM。应用程序(通常是managemet控制台或分析器之类的工具)使用虚拟机将代理加载到目标VM中。例如，用Java语言编写的分析器工具可能附加到正在运行的应用程序，并加载其分析器代理来分析正在运行的应用程序。</p>
<p>通过调用带有标识目标虚拟机的标识符的attach方法来获得虚拟机。标识符依赖于实现，但在每个Java虚拟机都在自己的操作系统进程中运行的环境中，标识符通常是进程标识符(或pid)。另外，通过使用从list方法返回的虚拟机描述符列表中获得的VirtualMachineDescriptor调用attach方法来获得虚拟机实例。一旦获得对虚拟机的引用，就使用loadAgent、loadAgentLibrary和loadAgentPath方法将代理加载到目标虚拟机中。loadAgent方法用于加载用Java语言编写并部署在JAR文件中的代理。loadAgentLibrary和loadAgentPath方法用于加载部署在动态库或静态链接到VM并使用JVM工具接口的代理。</p>
<p>除了加载代理之外，虚拟机还提供对目标VM中的系统属性的读访问。这在某些环境中非常有用，比如java。home、os.name或os。arch用于构造将加载到目标VM的代理的路径。</p>
<p>一个启动jmx的例子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// attach to target VM</span><br><span class="line">VirtualMachine vm = VirtualMachine.attach(&quot;2177&quot;);</span><br><span class="line"></span><br><span class="line">// start management agent</span><br><span class="line">Properties props = new Properties();</span><br><span class="line">props.put(&quot;com.sun.management.jmxremote.port&quot;, &quot;5000&quot;);</span><br><span class="line">vm.startManagementAgent(props);</span><br><span class="line"></span><br><span class="line">// detach</span><br><span class="line">vm.detach();</span><br></pre></td></tr></table></figure>
<p>虚拟机对于多个并发线程的使用是安全的。</p>
<h4 id="ClassFileTransformer"><a href="#ClassFileTransformer" class="headerlink" title="ClassFileTransformer"></a>ClassFileTransformer</h4><p>代理提供此接口的实现，以便转换类文件。转换发生在JVM定义类之前。</p>
<p>一个代理提供者需要实现：ClassFileTransformer 接口，来转变class文件，这个接口有一个方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">byte[]</span><br><span class="line">transform(  ClassLoader         loader,</span><br><span class="line">            String              className,</span><br><span class="line">            Class&lt;?&gt;            classBeingRedefined,</span><br><span class="line">            ProtectionDomain    protectionDomain,</span><br><span class="line">            byte[]              classfileBuffer)</span><br><span class="line">    throws IllegalClassFormatException;</span><br></pre></td></tr></table></figure>

<p>此方法的实现可以转换提供的类文件并返回一个新的替换类文件</p>
<p>一旦向addTransformer注册了一个transformer，每个新的类定义和每个类重定义都会调用这个transformer。每个类重新转换时也将调用具有重新转换能力的转换器。<br>对新类定义的请求是用  ClassLoader.defineClass 或本地调用触发的。<br>对类的重定义请求是通过 Instrumentation.redefineClasses 或本地调用触发的。<br>对类重新转换的请求是通过 Instrumentation.retransformClasses 或本地调用触发的。<br>在处理请求期间，在类文件字节被验证或应用之前调用转换器。<br>当有多个转换器时，转换由链接转换调用组成。也就是说，一个转换调用返回的字节数组将成为下一个调用的输入(通过classfileBuffer参数)。</p>
<p>关于transform输入的classfileBuffer参数：<br>如果实现方法确定不需要转换，则返回null。否则，它应该创建一个新的byte[]数组，将输入classfileBuffer连同所有所需的转换复制到其中，并返回新数组。不能修改输入classfileBuffer。</p>
<p>在重新转换和重新定义的情况下，转换器必须支持重新定义语义:如果转换器在初始定义期间更改的类稍后被重新转换或重新定义，转换器必须确保第二个类输出类文件是第一个输出类文件的合法重新定义。</p>
<p>如果transformer抛出异常(它没有捕获异常)，后续的transformer仍然会被调用，并且负载、重新定义或重新转换仍然会被尝试。因此，抛出异常的效果与返回null相同。为了防止在transformer代码中生成未检查异常时出现意外行为，transformer可以捕获Throwable。如果转换器认为classFileBuffer不代表一个有效格式化的类文件，它应该抛出一个IllegalClassFormatException;而这与返回null具有相同的效果。它有助于记录或调试格式错误。</p>
<p><strong>参数说明：</strong>  </p>
<ol>
<li>loader   要转换的类的定义类加载器，如果是bootstrap loader则为空</li>
<li>className  类名的内部形式为Java虚拟机规范中定义的完全限定类名和接口名。例如：”java&#x2F;util&#x2F;List”。</li>
<li>classBeingRedefined  如果这是由重新定义或重新转换触发的，则这个类存在重新定义或重新转换，否则为null。</li>
<li>protectionDomain 正在定义或重新定义的类的保护域</li>
<li>classfileBuffer 类文件格式的输入字节缓冲区-<strong>不能修改</strong></li>
</ol>
<p><strong>返回：</strong><br>格式良好的类文件缓冲区(转换的结果)，如果没有执行转换，则为null。</p>
<h4 id="Instrumentation"><a href="#Instrumentation" class="headerlink" title="Instrumentation"></a>Instrumentation</h4><p>该类提供测试Java编程语言代码所需的服务。插装是将字节码添加到方法中，以便收集工具使用的数据。由于这些更改纯粹是附加的，所以这些工具不会修改应用程序状态或行为。此类良性工具的例子包括监视代理、分析器、覆盖率分析器和事件日志记录器。</p>
<p>获取Instrumentation  接口实例有两种方法:  </p>
<ol>
<li>当JVM以指示代理类的方式启动时。在这种情况下，将一个插装实例传递给代理类的premain方法。</li>
<li>当JVM在启动后的某个时候提供启动代理的机制时。在这种情况下，将一个插装实例传递给代理代码的agentmain方法。</li>
</ol>
<p>一旦代理获得一个Instrumentation 实例，代理可以在任何时候调用该实例上的方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Instrumentation.addTransformer(new Transformer(), true);  </span><br></pre></td></tr></table></figure>
<p>第二个参数表示是否可以重新转换已经定义好了的类<br>对于启动后再附加agent的方式，如果想要改变已经加载了的类，需要设置为true</p>
<p>并且注意修改manifest文件中的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can-Retransform-Classes: true</span><br></pre></td></tr></table></figure>

<p>否则会报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adding retransformable transformers is not supported in this environment</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><h5 id="pom-文件示例："><a href="#pom-文件示例：" class="headerlink" title="pom 文件示例："></a>pom 文件示例：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">	&lt;dependency&gt;</span><br><span class="line">		&lt;groupId&gt;jdk.tools&lt;/groupId&gt;</span><br><span class="line">		&lt;artifactId&gt;jdk.tools&lt;/artifactId&gt;</span><br><span class="line">		&lt;version&gt;1.8&lt;/version&gt;</span><br><span class="line">		&lt;scope&gt;system&lt;/scope&gt;</span><br><span class="line">		&lt;systemPath&gt;$&#123;JAVA_HOME&#125;/lib/tools.jar&lt;/systemPath&gt;</span><br><span class="line">	&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;build&gt;</span><br><span class="line">	&lt;plugins&gt;</span><br><span class="line">		&lt;plugin&gt;</span><br><span class="line">			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;</span><br><span class="line">			&lt;configuration&gt;</span><br><span class="line">				&lt;archive&gt;</span><br><span class="line">					&lt;manifest&gt;</span><br><span class="line">						&lt;addClasspath&gt;true&lt;/addClasspath&gt;</span><br><span class="line">					&lt;/manifest&gt;</span><br><span class="line">					&lt;manifestEntries&gt;</span><br><span class="line">						&lt;!-- 参数方式启动agent需要这个 --&gt;</span><br><span class="line">						&lt;Premain-Class&gt;</span><br><span class="line">							com.wwh.agentmain.AgentMain</span><br><span class="line">						&lt;/Premain-Class&gt;</span><br><span class="line"></span><br><span class="line">						&lt;!-- 启动后附加启动agent需要这个 --&gt;</span><br><span class="line">						&lt;Agent-Class&gt;</span><br><span class="line">							com.wwh.agentmain.AgentMain</span><br><span class="line">						&lt;/Agent-Class&gt;</span><br><span class="line"></span><br><span class="line">						&lt;!-- 是否可以重新转换类 --&gt;</span><br><span class="line">						&lt;Can-Retransform-Classes&gt;</span><br><span class="line">							true</span><br><span class="line">						&lt;/Can-Retransform-Classes&gt;</span><br><span class="line"></span><br><span class="line">						&lt;!-- 是否可以重新定义类 --&gt;</span><br><span class="line">						&lt;Can-Redefine-Classes&gt;</span><br><span class="line">							true</span><br><span class="line">						&lt;/Can-Redefine-Classes&gt;</span><br><span class="line"></span><br><span class="line">					&lt;/manifestEntries&gt;</span><br><span class="line">				&lt;/archive&gt;</span><br><span class="line">			&lt;/configuration&gt;</span><br><span class="line">		&lt;/plugin&gt;</span><br><span class="line">	&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>

<h5 id="manifest文件示例："><a href="#manifest文件示例：" class="headerlink" title="manifest文件示例："></a>manifest文件示例：</h5><p>META-INF&#x2F;MANIFEST.MF</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Manifest-Version: 1.0</span><br><span class="line">Premain-Class: com.wwh.agentmain.AgentMain</span><br><span class="line">Archiver-Version: Plexus Archiver</span><br><span class="line">Built-By: Administrator</span><br><span class="line">Agent-Class: com.wwh.agentmain.AgentMain</span><br><span class="line">Can-Redefine-Classes: true</span><br><span class="line">Can-Retransform-Classes: true</span><br><span class="line">Created-By: Apache Maven 3.5.3</span><br><span class="line">Build-Jdk: 1.8.0_151</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="代码例子"><a href="#代码例子" class="headerlink" title="代码例子"></a>代码例子</h3><p><a target="_blank" rel="noopener" href="https://github.com/wangwen135/java-agent-test">https://github.com/wangwen135/java-agent-test</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/Maven/maven%20%E6%89%93%E5%8C%85%20cannot%20access%20%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Maven/maven%20%E6%89%93%E5%8C%85%20cannot%20access%20%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">maven 打包 cannot access 问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-16 23:41:00" itemprop="dateCreated datePublished" datetime="2019-04-16T23:41:00+08:00">2019-04-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Maven/" itemprop="url" rel="index"><span itemprop="name">Maven</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>455</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>一个项目在开发环境，本地都能打包通过</p>
<p>在测试环境打包过不去</p>
<p>提示 error: cannot access xxxxxxx</p>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>开发和测试环境用了两套私服</p>
<p>测试环境有人手动上传了jar包，该jar包对应的pom文件，由nexus生成【&gt;POM was created by Sonatype Nexus】，没有dependencies 节点</p>
<h3 id="处理"><a href="#处理" class="headerlink" title="处理"></a>处理</h3><p>在nexus的 3rd party 中删除该jar，重新上传即可</p>
<h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h4><p>如果通过手动上传的方式 GAV Definition 不能选择 GAV Parameters<br>应该选择：<br><strong>GAV Definition： from pom</strong></p>
<h3 id="排查问题"><a href="#排查问题" class="headerlink" title="排查问题"></a>排查问题</h3><p>检查环境、检查配置，对比jar包等都没有问题</p>
<p>使用 mvn dependency:tree 命令，发现测试环境比开发环境少依赖了几个jar包</p>
<p>然后找的mavne 的 【localRepository】 目录中，按照路径找到对应jar包【根据提示缺少的类和依赖关系】的路径</p>
<p>如：</p>
<blockquote>
<p>&#x2F;data&#x2F;repo&#x2F;com&#x2F;xxx&#x2F;xxx&#x2F;xxxxxxx&#x2F;0.1.9.RELEASE</p>
</blockquote>
<p>这个目录下有xxxx-version.jar和一个对应的xxxx-version.pom文件，问题就是这个pom文件没有dependencies信息</p>
<p>有问题pom文件如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    &lt;groupId&gt;com.appleframework.jms&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;apple-jms-kafka&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.1.9.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;description&gt;POM was created by Sonatype Nexus&lt;/description&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>

<p>正常的应该是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;project</span><br><span class="line">	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><br><span class="line">	xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</span><br><span class="line">	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">	&lt;parent&gt;</span><br><span class="line">		&lt;groupId&gt;com.appleframework.jms&lt;/groupId&gt;</span><br><span class="line">		&lt;artifactId&gt;apple-jms&lt;/artifactId&gt;</span><br><span class="line">		&lt;version&gt;0.1.9.RELEASE&lt;/version&gt;</span><br><span class="line">	&lt;/parent&gt;</span><br><span class="line">	&lt;artifactId&gt;apple-jms-kafka&lt;/artifactId&gt;</span><br><span class="line">	&lt;name&gt;apple-jms-kafka&lt;/name&gt;</span><br><span class="line">	&lt;url&gt;http://mvnrepo.appleframework.com&lt;/url&gt;</span><br><span class="line">		</span><br><span class="line">	&lt;dependencies&gt;</span><br><span class="line">	</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;com.appleframework.jms&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;apple-jms-core&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;$&#123;project.version&#125;&lt;/version&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;kafka_2.11&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;0.11.0.3&lt;/version&gt;</span><br><span class="line">			&lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-test&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">  			&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;</span><br><span class="line">  			&lt;artifactId&gt;gson&lt;/artifactId&gt;</span><br><span class="line">  			&lt;version&gt;2.8.5&lt;/version&gt;</span><br><span class="line">  			&lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		</span><br><span class="line">	&lt;/dependencies&gt;</span><br><span class="line">&lt;/project&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E8%84%9A%E6%9C%AC/bat/bat%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E8%84%9A%E6%9C%AC/bat/bat%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/" class="post-title-link" itemprop="url">bat 命令行修改文件权限</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-14 23:41:00" itemprop="dateCreated datePublished" datetime="2019-03-14T23:41:00+08:00">2019-03-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%84%9A%E6%9C%AC/" itemprop="url" rel="index"><span itemprop="name">脚本</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%84%9A%E6%9C%AC/bat/" itemprop="url" rel="index"><span itemprop="name">bat</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>328</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SET PATH=G:\360WIFI</span><br><span class="line">Takeown /F %PATH% /r /d y</span><br><span class="line">cacls %PATH% /t /e /g Administrators:F</span><br><span class="line">rd /s /q %PATH%</span><br><span class="line">@pause</span><br></pre></td></tr></table></figure>


<p>实际测试情况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\SysWOW64\Macromed\Flash&gt;del /F activex.vch</span><br><span class="line">C:\Windows\SysWOW64\Macromed\Flash\activex.vch</span><br><span class="line">拒绝访问。</span><br><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed\Flash&gt;takeown /F activex.vch</span><br><span class="line"></span><br><span class="line">成功: 此文件(或文件夹): &quot;C:\Windows\SysWOW64\Macromed\Flash\activex.vch&quot; 现在由用户 &quot;WWH\wangw&quot; 所有。</span><br><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed\Flash&gt;cacls activex.vch /e /g &quot;WWH\wangw&quot;:F</span><br><span class="line">处理的文件: C:\Windows\SysWOW64\Macromed\Flash\activex.vch</span><br><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed\Flash&gt;del activex.vch</span><br><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed\Flash&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>删除目录测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed&gt;rd /s Flash</span><br><span class="line">Flash, 是否确认(Y/N)? y</span><br><span class="line">Flash\Flash.ocx - 拒绝访问。</span><br><span class="line">Flash\FlashUtil_ActiveX.dll - 拒绝访问。</span><br><span class="line">Flash\FlashUtil_ActiveX.exe - 拒绝访问。</span><br><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed&gt;takeown /F Flash /r</span><br><span class="line"></span><br><span class="line">成功: 此文件(或文件夹): &quot;C:\Windows\SysWOW64\Macromed\Flash&quot; 现在由用户 &quot;WWH\wangw&quot; 所有。</span><br><span class="line"></span><br><span class="line">成功: 此文件(或文件夹): &quot;C:\Windows\SysWOW64\Macromed\Flash\Flash.ocx&quot; 现在由用户 &quot;WWH\wangw&quot; 所有。</span><br><span class="line"></span><br><span class="line">成功: 此文件(或文件夹): &quot;C:\Windows\SysWOW64\Macromed\Flash\FlashUtil_ActiveX.dll&quot; 现在由用户 &quot;WWH\wangw&quot; 所有。</span><br><span class="line"></span><br><span class="line">成功: 此文件(或文件夹): &quot;C:\Windows\SysWOW64\Macromed\Flash\FlashUtil_ActiveX.exe&quot; 现在由用户 &quot;WWH\wangw&quot; 所有。</span><br><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed&gt;cacls Flash /t /e /g &quot;WWH\wangw&quot;:F</span><br><span class="line">处理的目录: C:\Windows\SysWOW64\Macromed\Flash</span><br><span class="line">处理的文件: C:\Windows\SysWOW64\Macromed\Flash\Flash.ocx</span><br><span class="line">处理的文件: C:\Windows\SysWOW64\Macromed\Flash\FlashUtil_ActiveX.dll</span><br><span class="line">处理的文件: C:\Windows\SysWOW64\Macromed\Flash\FlashUtil_ActiveX.exe</span><br><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed&gt;rd /s Flash</span><br><span class="line">Flash, 是否确认(Y/N)? y</span><br><span class="line"></span><br><span class="line">C:\Windows\SysWOW64\Macromed&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/java/%E6%A0%88%E6%BA%A2%E5%87%BA%20StackOverflowError/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java/%E6%A0%88%E6%BA%A2%E5%87%BA%20StackOverflowError/" class="post-title-link" itemprop="url">栈溢出 StackOverflowError</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-02-10 09:28:00" itemprop="dateCreated datePublished" datetime="2019-02-10T09:28:00+08:00">2019-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>705</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>生产环境栈溢出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">3282788         at com.chedaia.task.address.util.ParkingPointUtil.getPreviewGpsPoint(ParkingPointUtil.java:410)</span><br><span class="line">3282789         at com.chedaia.task.address.util.ParkingPointUtil.getPreviewGpsPoint(ParkingPointUtil.java:410)</span><br><span class="line">3282790 Exception in thread &quot;pool-250-thread-43&quot; java.lang.StackOverflowError</span><br><span class="line">3282791         at java.util.AbstractCollection.toArray(AbstractCollection.java:183)</span><br><span class="line">3282792         at java.lang.String.split(String.java:2378)</span><br><span class="line">3282793         at com.chedaia.task.address.util.ParkingPointUtil.isGps(ParkingPointUtil.java:32)</span><br><span class="line">3282794         at com.chedaia.task.address.util.ParkingPointUtil.getPreviewGpsPoint(ParkingPointUtil.java:406)</span><br><span class="line">3282795         at com.chedaia.task.address.util.ParkingPointUtil.getPreviewGpsPoint(ParkingPointUtil.java:410)</span><br><span class="line">3282796         at com.chedaia.task.address.util.ParkingPointUtil.getPreviewGpsPoint(ParkingPointUtil.java:410)</span><br><span class="line">3282797         at com.chedaia.task.address.util.ParkingPointUtil.getPreviewGpsPoint(ParkingPointUtil.java:410)</span><br><span class="line">3282798         at com.chedaia.task.address.util.ParkingPointUtil.getPreviewGpsPoint(ParkingPointUtil.java:410)</span><br><span class="line">3282799         at com.chedaia.task.address.util.ParkingPointUtil.getPreviewGpsPoint(ParkingPointUtil.java:410)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>递归调用次数太多导致<br>且启动脚本中设置了-Xss</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:PermSize=128m -Xss256k </span><br></pre></td></tr></table></figure>

<h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><h2 id="由于涉及到的代码依赖较多，先不改动代码加大线程栈大小到2m"><a href="#由于涉及到的代码依赖较多，先不改动代码加大线程栈大小到2m" class="headerlink" title="由于涉及到的代码依赖较多，先不改动代码加大线程栈大小到2m"></a>由于涉及到的代码依赖较多，先不改动代码<br>加大线程栈大小到2m<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:PermSize=128m -Xss2m </span><br></pre></td></tr></table></figure></h2><hr>
<h2 id="线程栈大小与递归次数测试"><a href="#线程栈大小与递归次数测试" class="headerlink" title="线程栈大小与递归次数测试"></a>线程栈大小与递归次数测试</h2><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    recursion(0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void recursion(int i) &#123;</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    i++;</span><br><span class="line">    recursion(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="执行结果"><a href="#执行结果" class="headerlink" title="执行结果"></a>执行结果</h4><p>结果：966</p>
<blockquote>
<p>此时的栈设置为： -Xss128k</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.StackOverflowError</span><br><span class="line">	at sun.nio.cs.UTF_8.updatePositions(UTF_8.java:77)</span><br><span class="line">	at sun.nio.cs.UTF_8.access$200(UTF_8.java:57)</span><br><span class="line">	at sun.nio.cs.UTF_8$Encoder.encodeArrayLoop(UTF_8.java:636)</span><br><span class="line">	at sun.nio.cs.UTF_8$Encoder.encodeLoop(UTF_8.java:691)</span><br><span class="line">	at java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java</span><br></pre></td></tr></table></figure>

<h3 id="不同栈大小下的递归次数"><a href="#不同栈大小下的递归次数" class="headerlink" title="不同栈大小下的递归次数"></a>不同栈大小下的递归次数</h3><table>
<thead>
<tr>
<th>线程栈大小</th>
<th>递归次数约为</th>
</tr>
</thead>
<tbody><tr>
<td>-Xss128k</td>
<td>966</td>
</tr>
<tr>
<td>-Xss256k</td>
<td>2467</td>
</tr>
<tr>
<td>-Xss512k</td>
<td>5447</td>
</tr>
<tr>
<td>-Xss1m</td>
<td>11404</td>
</tr>
<tr>
<td>-Xss2m</td>
<td>23323</td>
</tr>
<tr>
<td>-Xss3m</td>
<td>35247</td>
</tr>
<tr>
<td>-Xss4m</td>
<td>41306</td>
</tr>
</tbody></table>
<h3 id="方法中的局部变量会占用栈空间"><a href="#方法中的局部变量会占用栈空间" class="headerlink" title="方法中的局部变量会占用栈空间"></a>方法中的局部变量会占用栈空间</h3><p>当递归的方法中定义了一些局部变量时会占用线程栈的空间，从而影响到递归的次数<br>如将上面的方法稍微修改一下，增加3个局部变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public static void recursion(int i) &#123;</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    long a = 1l;</span><br><span class="line">    long b = 2l;</span><br><span class="line">    long c = a + b;</span><br><span class="line">    i++;</span><br><span class="line">    recursion(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在栈大小设置为： -Xss128k 时，结果是：623</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">java.lang.StackOverflowError</span><br><span class="line">	at sun.nio.cs.UTF_8.updatePositions(UTF_8.java:77)</span><br><span class="line">	at sun.nio.cs.UTF_8.access$200(UTF_8.java:57)</span><br><span class="line">	at sun.nio.cs.UTF_8$Encoder.encodeArrayLoop(UTF_8.java:636)</span><br><span class="line">	at sun.nio.cs.UTF_8$Encoder.encodeLoop(UTF_8.java:691)</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="官方说明"><a href="#官方说明" class="headerlink" title="官方说明"></a>官方说明</h3><p><a target="_blank" rel="noopener" href="https://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom">https://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom</a></p>
<p>您可能遇到线程的默认堆栈大小的问题。在Java SE 6中，Sparc的默认值是32位VM中的512k, 64位VM中的1024k。</p>
<p>在x86 Solaris&#x2F;Linux上，32位虚拟机中是320k, 64位虚拟机中是1024k。</p>
<p>在Windows上，默认的线程堆栈大小是从二进制文件(java.exe)读取的。在Java SE 6中，这个值在32位VM中是320k，在64位VM中是1024k。</p>
<p>您可以通过使用-Xss选项运行来减小堆栈大小。例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -server -Xss64k</span><br></pre></td></tr></table></figure>
<p>注意，在某些版本的Windows上，操作系统可能使用非常粗的粒度来计算线程堆栈大小。如果请求的大小小于默认大小1K或更大，则将堆栈大小四舍五入到默认大小;否则，堆栈大小将四舍五入为1 MB的倍数。</p>
<p>64k是每个线程允许的最小堆栈空间量。</p>
<blockquote>
<p>不显式设置-Xss或-XX:ThreadStackSize时，或者把-Xss或者-XX:ThreadStackSize设为0，就是使用“系统默认值”。</p>
</blockquote>
<h3 id="用命令查看"><a href="#用命令查看" class="headerlink" title="用命令查看"></a>用命令查看</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># java -XX:+PrintFlagsFinal -version | grep ThreadStackSize</span><br><span class="line">     intx CompilerThreadStackSize                   = 0                                   &#123;pd product&#125;</span><br><span class="line">     intx ThreadStackSize                           = 1024                                &#123;pd product&#125;</span><br><span class="line">     intx VMThreadStackSize                         = 1024                                &#123;pd product&#125;</span><br><span class="line">java version &quot;1.8.0_162&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_162-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.162-b12, mixed mode)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E8%84%9A%E6%9C%AC/bat/%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%94%A8%E7%9A%84bat%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E8%84%9A%E6%9C%AC/bat/%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%94%A8%E7%9A%84bat%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">一些实用的bat脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-27 09:31:00" itemprop="dateCreated datePublished" datetime="2018-09-27T09:31:00+08:00">2018-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%84%9A%E6%9C%AC/" itemprop="url" rel="index"><span itemprop="name">脚本</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%84%9A%E6%9C%AC/bat/" itemprop="url" rel="index"><span itemprop="name">bat</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>289</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在windows 和 linux的命令行来回切换，经常敲错命令，如：ls、pwd、grep 等</p>
<p>通过写bat的办法让windows支持这几个常用命令</p>
<p>找一个目录，将其添加到环境变量中，在目录中新建几个bat文件，如下：</p>
<h3 id="ll-bat"><a href="#ll-bat" class="headerlink" title="ll.bat"></a>ll.bat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">REM 显示一个目录中的文件和子目录</span><br><span class="line">dir</span><br></pre></td></tr></table></figure>

<h3 id="pwd-bat"><a href="#pwd-bat" class="headerlink" title="pwd.bat"></a>pwd.bat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">REM 显示当前目录的名称或将其更改。</span><br><span class="line">chdir</span><br></pre></td></tr></table></figure>

<h3 id="ls-bat"><a href="#ls-bat" class="headerlink" title="ls.bat"></a>ls.bat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">REM 显示一个目录中的文件和子目录 /W 用宽列表格式</span><br><span class="line"></span><br><span class="line">dir /W</span><br></pre></td></tr></table></figure>

<h3 id="grep-bat"><a href="#grep-bat" class="headerlink" title="grep.bat"></a>grep.bat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">REM 模拟grep</span><br><span class="line">REM 在文件中搜索字符串。</span><br><span class="line">REM FIND [/V] [/C] [/N] [/I] [/OFF[LINE]] &quot;string&quot; [[drive:][path]filename[ ...]]</span><br><span class="line">REM /I  搜索字符串时忽略大小写。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">find /I &quot;%1&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="clear-bat"><a href="#clear-bat" class="headerlink" title="clear.bat"></a>clear.bat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">REM 清除屏幕</span><br><span class="line"></span><br><span class="line">cls</span><br></pre></td></tr></table></figure>

<h3 id="checksum-bat"><a href="#checksum-bat" class="headerlink" title="checksum.bat"></a>checksum.bat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@echo OFF</span><br><span class="line">:LOOP</span><br><span class="line">    set index=%1</span><br><span class="line">    if %index%! == ! goto END</span><br><span class="line">    echo.</span><br><span class="line">    echo File   : %index%</span><br><span class="line">    echo.</span><br><span class="line">    set /p=&quot;MD5    : &quot;&lt;nul</span><br><span class="line">    certutil -hashfile &quot;%index%&quot; MD5|findstr /V &quot;MD5&quot;|findstr /V &quot;CertUtil&quot;</span><br><span class="line">    set /p=&quot;SHA1   : &quot;&lt;nul</span><br><span class="line">    certutil -hashfile &quot;%index%&quot; SHA1|findstr /V &quot;SHA1&quot;|findstr /V &quot;CertUtil&quot;</span><br><span class="line">    set /p=&quot;SHA256 : &quot;&lt;nul</span><br><span class="line">    certutil -hashfile &quot;%index%&quot; SHA256|findstr /V &quot;SHA256&quot;|findstr /V &quot;CertUtil&quot;</span><br><span class="line">    shift</span><br><span class="line">    goto LOOP</span><br><span class="line">:END</span><br><span class="line">echo.</span><br></pre></td></tr></table></figure>

<h3 id="exp-bat"><a href="#exp-bat" class="headerlink" title="exp.bat"></a>exp.bat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">REM 资源管理器打开当前目录</span><br><span class="line"></span><br><span class="line">explorer /select=%cd%</span><br></pre></td></tr></table></figure>

<h3 id="sp-bat"><a href="#sp-bat" class="headerlink" title="sp.bat"></a>sp.bat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">REM 打开windows截图工具</span><br><span class="line"></span><br><span class="line">start snippingtool</span><br></pre></td></tr></table></figure>
<blockquote>
<p>win10快捷键 win + shift + s</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/Elasticsearch/elasticsearch%20%E8%8A%82%E7%82%B9%E9%87%8D%E5%90%AF%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Elasticsearch/elasticsearch%20%E8%8A%82%E7%82%B9%E9%87%8D%E5%90%AF%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">elasticsearch 节点重启问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-26 15:29:00" itemprop="dateCreated datePublished" datetime="2018-09-26T15:29:00+08:00">2018-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Elasticsearch/" itemprop="url" rel="index"><span itemprop="name">Elasticsearch</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>655</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>ElasticSearch集群的高可用和自平衡方案会在节点挂掉（重启）后自动在别的结点上复制该结点的分片，这将导致了大量的IO和网络开销。</p>
<p>如果离开的节点重新加入集群，elasticsearch为了对数据分片(shard)进行再平衡，会为重新加入的节点再次分配数据分片(Shard), 当一台es因为压力过大而挂掉以后，其他的es服务会备份本应那台es保存的数据，造成更大压力，于是整个集群会发生雪崩。</p>
<p>生产环境下建议关闭自动平衡。</p>
<h2 id="数据分片与自平衡"><a href="#数据分片与自平衡" class="headerlink" title="数据分片与自平衡"></a>数据分片与自平衡</h2><p>一：关闭自动分片，即使新建index也无法分配数据分片</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT http://192.168.1.213:9200/_cluster/settings -d &#x27;&#123;</span><br><span class="line">  &quot;transient&quot; : &#123;</span><br><span class="line">    &quot;cluster.routing.allocation.enable&quot; : &quot;none&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>二：关闭自动平衡，只在增减ES节点时不自动平衡数据分片</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT http://192.168.1.213:9200/_cluster/settings?pretty -d &#x27;&#123;</span><br><span class="line">  &quot;transient&quot; : &#123;</span><br><span class="line">    &quot;cluster.routing.rebalance.enable&quot; : &quot;none&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>设置完以后查看设置是否添加成功：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://192.168.1.213:9200/_cluster/settings?pretty</span><br></pre></td></tr></table></figure>

<p>重新启用自动分片</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT http://192.168.1.213:9200/_cluster/settings -d &#x27;&#123;</span><br><span class="line">  &quot;transient&quot; : &#123;</span><br><span class="line">    &quot;cluster.routing.allocation.enable&quot; : &quot;all&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="延迟副本的重新分配"><a href="#延迟副本的重新分配" class="headerlink" title="延迟副本的重新分配"></a>延迟副本的重新分配</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT /_all/_settings</span><br><span class="line">&#123;</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">    &quot;index.unassigned.node_left.delayed_timeout&quot;: &quot;5m&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>未分配节点重新分配延迟到5分钟之后</p>
<p>下面是修改 elasticsearch.yml 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gateway.recover_after_nodes: 8</span><br></pre></td></tr></table></figure>
<p>这将防止Elasticsearch立即开始数据恢复，直到集群中至少有八个（数据节点或主节点）节点存在。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gateway.expected_nodes: 10 </span><br><span class="line"></span><br><span class="line">gateway.recover_after_time: 5m</span><br></pre></td></tr></table></figure>
<p>集群开始数据恢复等到5分钟后或者10个节点加入，以先到者为准。</p>
<p>参考：<br><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/modules-gateway.html">https://www.elastic.co/guide/en/elasticsearch/reference/2.4/modules-gateway.html</a></p>
<h2 id="脑裂问题"><a href="#脑裂问题" class="headerlink" title="脑裂问题"></a>脑裂问题</h2><p>对某一个实例进行重启后，很有可能会导致该实例无法找到master而将自己推举为master的情况出现，为防止这种情况，需要调整 elasticsearch.yml 中的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">discovery.zen.minimum_master_nodes: 2</span><br></pre></td></tr></table></figure>
<p>这个配置就是告诉Elasticsearch除非有足够可用的master候选节点，否则就不选举master，只有有足够可用的master候选节点才进行选举。<br>该设置应该始终被配置为有主节点资格的点数&#x2F;2 + 1，例如:<br>有10个符合规则的节点数，则配置为6.<br>有3个则配置为2.</p>
<hr>
<h2 id="关于设置的有效性"><a href="#关于设置的有效性" class="headerlink" title="关于设置的有效性"></a>关于设置的有效性</h2><p><strong>persistent</strong> 重启后设置也会存在<br><strong>transient</strong> 整个集群重启后会消失的设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT /_cluster/settings</span><br><span class="line">&#123;</span><br><span class="line">    &quot;persistent&quot; : &#123;</span><br><span class="line">        &quot;discovery.zen.minimum_master_nodes&quot; : 2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<hr>
<h2 id="一般设置下面两个就可以了"><a href="#一般设置下面两个就可以了" class="headerlink" title="一般设置下面两个就可以了"></a>一般设置下面两个就可以了</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 通过配置大多数节点(节点总数/ 2 + 1)来防止脑裂</span><br><span class="line">#</span><br><span class="line">discovery.zen.minimum_master_nodes: 2</span><br><span class="line"></span><br><span class="line"># 在一个完整的集群重新启动到N个节点开始之前，阻止初始恢复</span><br><span class="line">#</span><br><span class="line">gateway.recover_after_nodes: 3</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/java/Swing/javaSwing%E4%B8%8D%E8%A7%84%E5%88%99%E7%AA%97%E4%BD%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java/Swing/javaSwing%E4%B8%8D%E8%A7%84%E5%88%99%E7%AA%97%E4%BD%93/" class="post-title-link" itemprop="url">java不规则窗体</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-18 20:11:00" itemprop="dateCreated datePublished" datetime="2018-09-18T20:11:00+08:00">2018-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Swing/" itemprop="url" rel="index"><span itemprop="name">Swing</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>715</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>用背景透明的png图片</p>
<p><img src="https://img.wangwen135.top:23456/note/2024/08/66ac91f302fa6.png" alt="1722585581717.png"></p>
<h3 id="不规则窗体"><a href="#不规则窗体" class="headerlink" title="不规则窗体"></a>不规则窗体</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">package com.wwh.excel.tools.swing;</span><br><span class="line"></span><br><span class="line">import java.awt.Color;</span><br><span class="line">import java.awt.Component;</span><br><span class="line">import java.awt.Graphics;</span><br><span class="line">import java.awt.Image;</span><br><span class="line">import java.awt.Point;</span><br><span class="line">import java.awt.Toolkit;</span><br><span class="line">import java.awt.datatransfer.DataFlavor;</span><br><span class="line">import java.awt.dnd.DnDConstants;</span><br><span class="line">import java.awt.dnd.DropTarget;</span><br><span class="line">import java.awt.dnd.DropTargetAdapter;</span><br><span class="line">import java.awt.dnd.DropTargetDropEvent;</span><br><span class="line">import java.awt.event.MouseAdapter;</span><br><span class="line">import java.awt.event.MouseEvent;</span><br><span class="line">import java.awt.event.MouseMotionAdapter;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line"></span><br><span class="line">import com.wwh.excel.tools.worker.Csv2Xls;</span><br><span class="line"></span><br><span class="line">public class ImageFrame extends JFrame &#123;</span><br><span class="line"></span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    private ImageIcon icon;</span><br><span class="line">    private Point origin = new Point();; // 用于移动窗体</span><br><span class="line"></span><br><span class="line">    // 小弹出框</span><br><span class="line">    private PopupDialog popupDialog;</span><br><span class="line"></span><br><span class="line">    public ImageFrame(ImageIcon icon2) &#123;</span><br><span class="line">        this.icon = icon2;</span><br><span class="line">        JLabel imageLabel = new JLabel() &#123;</span><br><span class="line">            private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void paint(Graphics g) &#123;</span><br><span class="line">                super.paint(g);</span><br><span class="line">                icon.paintIcon(this, g, 0, 0);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        this.add(imageLabel);</span><br><span class="line"></span><br><span class="line">        this.setUndecorated(true); // 关键语句1 不启用窗体装饰</span><br><span class="line"></span><br><span class="line">        this.setSize(icon.getIconWidth(), icon.getIconHeight()); // 设置窗口大小</span><br><span class="line"></span><br><span class="line">        // 这个需要包的支持</span><br><span class="line">        // AWTUtilities.setWindowOpaque(this, false);</span><br><span class="line"></span><br><span class="line">        // JDK 1.7 版本以上，使用 this.setBackground(new Color(0, 0, 0, 0));</span><br><span class="line">        this.setBackground(new Color(0, 0, 0, 0)); // 关键句2</span><br><span class="line"></span><br><span class="line">        // 设置透明度</span><br><span class="line">        this.setOpacity(0.9f);</span><br><span class="line"></span><br><span class="line">        this.setLocationRelativeTo(null); // 设置窗口居中</span><br><span class="line">        // setVisible(true);</span><br><span class="line"></span><br><span class="line">        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"></span><br><span class="line">        // 鼠标事件监听</span><br><span class="line">        // 由于取消了默认的窗体结构，所以我们要手动设置一下移动窗体的方法</span><br><span class="line">        this.addMouseListener(new MouseAdapter() &#123;</span><br><span class="line">            public void mousePressed(MouseEvent e) &#123;</span><br><span class="line">                origin.x = e.getX();</span><br><span class="line">                origin.y = e.getY();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 窗体上单击鼠标右键关闭程序</span><br><span class="line">            public void mouseClicked(MouseEvent e) &#123;</span><br><span class="line"></span><br><span class="line">                if (e.getButton() == MouseEvent.BUTTON3) &#123;</span><br><span class="line">                    System.exit(0);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    if (popupDialog != null) &#123;</span><br><span class="line">                        popupDialog.showDelayHide();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        this.addMouseMotionListener(new MouseMotionAdapter() &#123;</span><br><span class="line">            public void mouseDragged(MouseEvent e) &#123;</span><br><span class="line">                Point p = getLocation();</span><br><span class="line">                setLocation(p.x + e.getX() - origin.x, p.y + e.getY() - origin.y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        drag(imageLabel);</span><br><span class="line"></span><br><span class="line">        // 设置窗口图标</span><br><span class="line">        Image img2 = Toolkit.getDefaultToolkit().getImage(ImageFrame.class.getResource(&quot;/icon.png&quot;));</span><br><span class="line">        setIconImage(img2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 定义的拖拽方法</span><br><span class="line">    public void drag(Component c) &#123;</span><br><span class="line">        // c 表示要接受拖拽的控件</span><br><span class="line">        new DropTarget(c, DnDConstants.ACTION_COPY_OR_MOVE, new DropTargetAdapter() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void drop(DropTargetDropEvent dtde)// 重写适配器的drop方法</span><br><span class="line">            &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    if (dtde.isDataFlavorSupported(DataFlavor.javaFileListFlavor))// 如果拖入的文件格式受支持</span><br><span class="line">                    &#123;</span><br><span class="line">                        dtde.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);// 接收拖拽来的数据</span><br><span class="line"></span><br><span class="line">                        @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">                        List&lt;File&gt; list = (List&lt;File&gt;) (dtde.getTransferable()</span><br><span class="line">                                .getTransferData(DataFlavor.javaFileListFlavor));</span><br><span class="line"></span><br><span class="line">                        if (list.size() &gt; 1) &#123;</span><br><span class="line">                            JOptionPane.showMessageDialog(null, &quot;一次拖一个文件，靓仔&quot;);</span><br><span class="line">                            return;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        Csv2Xls.convert(list.get(0));</span><br><span class="line"></span><br><span class="line">                        popupDialog.showDelayHide();</span><br><span class="line"></span><br><span class="line">                        dtde.dropComplete(true);// 指示拖拽操作已完成</span><br><span class="line"></span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        dtde.rejectDrop();// 否则拒绝拖拽来的数据</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; catch (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    JOptionPane.showMessageDialog(null, &quot;出错了，靓仔\n&quot; + e.getMessage());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public PopupDialog getPopupDialog() &#123;</span><br><span class="line">        return popupDialog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPopupDialog(PopupDialog popupDialog) &#123;</span><br><span class="line">        this.popupDialog = popupDialog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="不规则弹出框"><a href="#不规则弹出框" class="headerlink" title="不规则弹出框"></a>不规则弹出框</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">package com.wwh.excel.tools.swing;</span><br><span class="line"></span><br><span class="line">import java.awt.Color;</span><br><span class="line">import java.awt.Frame;</span><br><span class="line">import java.awt.Graphics;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.awt.event.MouseAdapter;</span><br><span class="line">import java.awt.event.MouseEvent;</span><br><span class="line"></span><br><span class="line">import javax.swing.ImageIcon;</span><br><span class="line">import javax.swing.JDialog;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.Timer;</span><br><span class="line"></span><br><span class="line">public class PopupDialog extends JDialog &#123;</span><br><span class="line"></span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">    private ImageIcon icon;</span><br><span class="line"></span><br><span class="line">    private Frame owner;</span><br><span class="line"></span><br><span class="line">    private Timer timer;</span><br><span class="line"></span><br><span class="line">    private void initTimer(int delayTime) &#123;</span><br><span class="line">        // 定时消失</span><br><span class="line">        ActionListener taskPerformer = new ActionListener() &#123;</span><br><span class="line">            public void actionPerformed(ActionEvent evt) &#123;</span><br><span class="line">                setVisible(false);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        timer = new Timer(delayTime, taskPerformer);</span><br><span class="line">        timer.setRepeats(false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Create the dialog.</span><br><span class="line">     */</span><br><span class="line">    public PopupDialog(Frame owner, ImageIcon icon2, int delayTime) &#123;</span><br><span class="line">        super(owner);</span><br><span class="line">        this.icon = icon2;</span><br><span class="line">        this.owner = owner;</span><br><span class="line"></span><br><span class="line">        initTimer(delayTime);</span><br><span class="line"></span><br><span class="line">        JLabel imageLabel = new JLabel() &#123;</span><br><span class="line">            private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void paint(Graphics g) &#123;</span><br><span class="line">                super.paint(g);</span><br><span class="line">                icon.paintIcon(this, g, 0, 0);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        this.add(imageLabel);</span><br><span class="line"></span><br><span class="line">        this.setUndecorated(true); // 关键语句1 不启用窗体装饰</span><br><span class="line"></span><br><span class="line">        this.setSize(icon.getIconWidth(), icon.getIconHeight()); // 设置窗口大小</span><br><span class="line"></span><br><span class="line">        // 这个需要包的支持</span><br><span class="line">        // AWTUtilities.setWindowOpaque(this, false);</span><br><span class="line"></span><br><span class="line">        // JDK 1.7 版本以上，使用 this.setBackground(new Color(0, 0, 0, 0));</span><br><span class="line">        this.setBackground(new Color(0, 0, 0, 0)); // 关键句2</span><br><span class="line"></span><br><span class="line">        this.setLocationRelativeTo(owner);</span><br><span class="line"></span><br><span class="line">        this.setDefaultCloseOperation(HIDE_ON_CLOSE);</span><br><span class="line"></span><br><span class="line">        this.addMouseListener(new MouseAdapter() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void mouseClicked(MouseEvent e) &#123;</span><br><span class="line"></span><br><span class="line">                PopupDialog.this.setVisible(false);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 先显示再延期隐藏</span><br><span class="line">     */</span><br><span class="line">    public void showDelayHide() &#123;</span><br><span class="line">        this.setLocationRelativeTo(owner);</span><br><span class="line">        setVisible(true);</span><br><span class="line">        timer.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setVisible(boolean b) &#123;</span><br><span class="line">        super.setVisible(b);</span><br><span class="line">        if (!b) &#123;</span><br><span class="line">            timer.stop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Launch the application.</span><br><span class="line">     */</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            ImageIcon icon = new ImageIcon(PopupDialog.class.getResource(&quot;/images/success.png&quot;));</span><br><span class="line">            PopupDialog dialog = new PopupDialog(null, icon, 10000);</span><br><span class="line">            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);</span><br><span class="line">            // dialog.setVisible(true);</span><br><span class="line">            dialog.showDelayHide();</span><br><span class="line"></span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wangwen135.github.io/%E8%84%9A%E6%9C%AC/bat/windows%20%E6%9D%80%E5%8D%A0%E7%94%A8%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%BF%9B%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="王某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王某某的笔记">
      <meta itemprop="description" content="这是一个使用 Hexo 构建的博客，用于分享我的编程经验和学习笔记。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 王某某的笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E8%84%9A%E6%9C%AC/bat/windows%20%E6%9D%80%E5%8D%A0%E7%94%A8%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%BF%9B%E7%A8%8B/" class="post-title-link" itemprop="url">windows 杀占用端口的进程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-27 09:52:00" itemprop="dateCreated datePublished" datetime="2018-08-27T09:52:00+08:00">2018-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%84%9A%E6%9C%AC/" itemprop="url" rel="index"><span itemprop="name">脚本</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%84%9A%E6%9C%AC/bat/" itemprop="url" rel="index"><span itemprop="name">bat</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>123</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="先找到占用端口的进程号"><a href="#先找到占用端口的进程号" class="headerlink" title="先找到占用端口的进程号"></a>先找到占用端口的进程号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;netstat -ano  | grep 8080</span><br><span class="line">  TCP    0.0.0.0:8080           0.0.0.0:0              LISTENING       10288</span><br><span class="line">  TCP    [::]:8080              [::]:0                 LISTENING       10288</span><br></pre></td></tr></table></figure>
<p>grep 命令原生是没有的，通过写批处理命令的方式支持的，可以用findstr命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;netstat -ano  | findstr 8080</span><br></pre></td></tr></table></figure>

<h4 id="杀进程"><a href="#杀进程" class="headerlink" title="杀进程"></a>杀进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;taskkill -PID 10288</span><br><span class="line">错误: 无法终止 PID 为 10288 的进程。</span><br><span class="line">原因: 只能强行终止这个进程(带 /F 选项)。</span><br></pre></td></tr></table></figure>

<h4 id="强制杀进程"><a href="#强制杀进程" class="headerlink" title="强制杀进程"></a>强制杀进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;taskkill /F -PID 10288</span><br><span class="line">成功: 已终止 PID 为 10288 的进程。</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/10/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/12/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">王某某</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">138k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">8:20</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  






  





</body>
</html>
